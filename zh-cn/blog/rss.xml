<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Rush Stack Blog</title>
        <link>https://rushstack.io/zh-cn/blog</link>
        <description>Rush Stack Blog</description>
        <lastBuildDate>Fri, 16 Jun 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-cn</language>
        <item>
            <title><![CDATA[Heft 0.51è¿ç§»æŒ‡å—]]></title>
            <link>https://rushstack.io/zh-cn/blog/2023/06/16/heft-migration-guide</link>
            <guid>https://rushstack.io/zh-cn/blog/2023/06/16/heft-migration-guide</guid>
            <pubDate>Fri, 16 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Heft 0.51.0 ç‰ˆæœ¬æ¨å‡ºäº†ä¸€ä¸ªå¸¦æ¥äº†ä¸€äº›é‡å¤§æ¶æ„å˜åŒ–çš„"å¤šé˜¶æ®µ"ç‰¹æ€§ã€‚å¦‚æœä½ ä¸€ç›´åœ¨ä½¿ç”¨è¾ƒæ—§çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå‡çº§å°†éœ€è¦å¯¹ä½ çš„Heft é…ç½®æ–‡ä»¶ä»¥åŠå¯èƒ½ç¼–å†™çš„è‡ªå®šä¹‰æ’ä»¶è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ€»ç»“å‘ç”Ÿäº†å“ªäº›æ›´æ”¹ï¼Œä»¥åŠå¦‚ä½•è¿ç§»ä½ çš„é¡¹ç›®ã€‚è¿™å¯èƒ½æ˜¯åœ¨ Heft çš„ 1.0.0 ç‰ˆæœ¬å‘å¸ƒä¹‹å‰çš„æœ€åä¸€æ¬¡é‡å¤§ç ´åæ€§æ›´æ”¹ã€‚]]></description>
            <content:encoded><![CDATA[<p>Heft <strong>0.51.0</strong> ç‰ˆæœ¬æ¨å‡ºäº†ä¸€ä¸ªå¸¦æ¥äº†ä¸€äº›é‡å¤§æ¶æ„å˜åŒ–çš„"å¤šé˜¶æ®µ"ç‰¹æ€§ã€‚å¦‚æœä½ ä¸€ç›´åœ¨ä½¿ç”¨è¾ƒæ—§çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå‡çº§å°†éœ€è¦å¯¹ä½ çš„<strong>Heft é…ç½®æ–‡ä»¶</strong>ä»¥åŠå¯èƒ½ç¼–å†™çš„<strong>è‡ªå®šä¹‰æ’ä»¶</strong>è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ€»ç»“å‘ç”Ÿäº†å“ªäº›æ›´æ”¹ï¼Œä»¥åŠå¦‚ä½•è¿ç§»ä½ çš„é¡¹ç›®ã€‚è¿™å¯èƒ½æ˜¯åœ¨ Heft çš„ 1.0.0 ç‰ˆæœ¬å‘å¸ƒä¹‹å‰çš„æœ€åä¸€æ¬¡é‡å¤§ç ´åæ€§æ›´æ”¹ã€‚</p><blockquote><p>æƒ³è¦æ›´æ·±å…¥åœ°äº†è§£å¤šé˜¶æ®µè®¾è®¡åŠå…¶èƒŒåçš„åŠ¨æœºï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„å¦ä¸€ç¯‡æ–‡ç« <a href="/zh-cn/blog/2023/06/15/heft-whats-new/">Heft 0.51 ä¸­çš„æ–°å†…å®¹</a>ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_abXo" id="ç‰ˆæœ¬æ—¶é—´çº¿">ç‰ˆæœ¬æ—¶é—´çº¿<a href="#ç‰ˆæœ¬æ—¶é—´çº¿" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è™½ç„¶å¤§éƒ¨åˆ†çš„é‡å¤§æ›´æ”¹éƒ½åœ¨ Heft <strong>0.51.0</strong> ä¸­ï¼Œä½†åœ¨åç»­çš„å‡ ä¸ªç‰ˆæœ¬ä¸­ä¹Ÿè¿›è¡Œäº†ä¸€äº›é‡è¦çš„æ›´æ”¹ï¼š</p><ul><li>Heft <strong>0.51.0</strong>: ä¸ºæ”¯æŒå¤šé˜¶æ®µåŠŸèƒ½åšå‡ºçš„å¤§è§„æ¨¡æ¶æ„å˜æ›´ï¼ŒåŒ…æ‹¬é…ç½®æ–‡ä»¶æ¶æ„å’Œæ’ä»¶ API çš„ç ´åæ€§æ›´æ”¹</li><li>Heft <strong>0.52.0</strong>: æ¢å¤å¯¹ <code>heft start</code> åˆ«åçš„æ”¯æŒï¼ˆè¯¥åˆ«ååœ¨ 0.51.0 ç‰ˆæœ¬ä¸­è¢«ç§»é™¤ï¼‰ï¼›å¢åŠ äº†å®šä¹‰è‡ªå®šä¹‰åˆ«åçš„èƒ½åŠ›ï¼›<code>@rushstack/heft-node-rig</code> ç°åœ¨ä½¿ç”¨ä¸ <code>@rushstack/heft-web-rig</code> ç›¸åŒçš„ <code>heft start</code> åˆ«åå¯åŠ¨å…¶å¼€å‘æœåŠ¡å™¨</li><li>Heft <strong>0.53.0</strong>: ç§»é™¤äº† <code>taskEvents</code> é…ç½®è®¾ç½®ï¼›åƒ <code>copy-files-plugin</code> å’Œ <code>node-service-plugin</code> è¿™æ ·çš„å†…å»ºä»»åŠ¡ç°åœ¨ä½¿ç”¨ä¸ç¬¬ä¸‰æ–¹æ’ä»¶ç›¸åŒçš„é…ç½®ï¼ˆç®€å•åœ°æŒ‡å®š <code>@rushstack/heft</code> ä¸ºä»–ä»¬çš„æ’ä»¶åŒ…åç§°ï¼‰</li><li>Heft <strong>0.54.0</strong>: æ¢å¤äº†å¯¹ <code>heft test -u</code> ä¸­ <code>-u</code> ç­‰çŸ­å‚æ•°åç§°çš„æ”¯æŒï¼ˆè¯¥æ”¯æŒåœ¨ 0.51.0 ç‰ˆæœ¬ä¸­è¢«ç§»é™¤ï¼‰</li><li>Heft <strong>0.55.0</strong>: ä»æ’ä»¶ API çš„ä¼šè¯å¯¹è±¡ä¸­ç§»é™¤äº† <code>cacheFolderPath</code>ï¼Œå› ä¸º <code>.cache</code> æ–‡ä»¶å¤¹ä¸å†è¢«ä½¿ç”¨</li></ul><p>ä¸ºäº†ç®€åŒ–è¿™äº›è¿ç§»è¯´æ˜ï¼Œåœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†å‡è®¾ä½ æ­£åœ¨å‡çº§åˆ° <strong>0.55.0 æˆ–æ›´æ–°çš„ç‰ˆæœ¬</strong>ï¼Œä¸”ä½ çš„å½“å‰ç‰ˆæœ¬æ˜¯ <strong>0.50.x æˆ–æ›´æ—§çš„ç‰ˆæœ¬</strong>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="è¿ç§»-heftjson-æ–‡ä»¶">è¿ç§» heft.json æ–‡ä»¶<a href="#è¿ç§»-heftjson-æ–‡ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_abXo" id="json-schema-url-çš„æ›´æ”¹">JSON Schema URL çš„æ›´æ”¹<a href="#json-schema-url-çš„æ›´æ”¹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>ä¸ºäº†åœ¨ç¼–è¾‘é…ç½®æ–‡ä»¶æ—¶èƒ½å¾—åˆ°æ­£ç¡®çš„ VS Code æ™ºèƒ½æç¤ºï¼Œéœ€è¦æ›´æ–°æ¯ä¸ª Heft é…ç½®æ–‡ä»¶ä¸­çš„ <code>"$schema"</code> å­—æ®µã€‚åªéœ€å°† <code>json-schemas/heft/</code> æ›¿æ¢ä¸º <code>json-schemas/heft/v0</code> å³å¯ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ul><li>æ—§çš„ï¼š<code>"$schema": "https://developer.microsoft.com/json-schemas/heft/heft.schema.json"</code></li><li>æ–°çš„ï¼š<code>"$schema": "https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json"</code></li></ul><p>å®Œæ•´çš„ JSON schema åç§°åˆ—è¡¨å¯ä»¥åœ¨<a href="https://github.com/microsoft/json-schemas/tree/main/heft/v0" target="_blank" rel="noopener noreferrer">æ­¤ GitHub æ–‡ä»¶å¤¹</a>ä¸­æ‰¾åˆ°ã€‚è¿™äº›åç§°æ˜¯ä¸Šé¢æ˜¾ç¤ºçš„ URL çš„æœ€åä¸€éƒ¨åˆ†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_abXo" id="æ’ä»¶å¿…é¡»æ˜¾å¼åŠ è½½">æ’ä»¶å¿…é¡»æ˜¾å¼åŠ è½½<a href="#æ’ä»¶å¿…é¡»æ˜¾å¼åŠ è½½" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨æ—§çš„è®¾è®¡ä¸­ï¼Œè®¸å¤šæ’ä»¶è¢«å†…ç½®äº <code>@rushstack/heft</code> ä¸­ï¼Œä¸éœ€è¦ä½¿ç”¨ <strong>heft.json</strong> è®¾ç½®æ˜¾å¼åŠ è½½ã€‚å¦‚æœæ‰¾ä¸åˆ°å®ƒä»¬ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ä»»åŠ¡å°±ä¼šè¢«é»˜é»˜åœ°è·³è¿‡ã€‚</p><p><strong>æ—§çš„ï¼š</strong> éšå¼åŠ è½½çš„æ’ä»¶ï¼š</p><ul><li>heft-typescript-plugin</li><li>copy-static-assets-plugin</li><li>copy-files-plugin</li><li>delete-globs-plugin</li><li>run-script-plugin</li><li>api-extractor-plugin</li><li>project-validator-plugin</li><li>node-service-plugin</li></ul><p><strong>æ–°çš„ï¼š</strong> è¿ç§»åï¼Œæ¯ä¸ªæ’ä»¶å¿…é¡»é€šè¿‡ <strong>heft.json</strong> é…ç½®æ–‡ä»¶æ˜¾å¼åŠ è½½ã€‚é€šå¸¸è¿™æ˜¯ä»ä½ çš„ rig ç»§æ‰¿è¿‡æ¥çš„ã€‚è¿™ç§æ–°æ¨¡å‹æ¶ˆé™¤äº†ç¥ç§˜å’Œä¸ç¡®å®šæ€§ï¼Œå› ä¸ºæ’ä»¶åŠå…¶ä¾èµ–çš„å®Œæ•´é›†åˆç°åœ¨åœ¨é…ç½®æ–‡ä»¶ä¸­è¡¨ç¤ºã€‚</p><p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨æˆ‘ä»¬çš„ <code>@rushstack/heft-node-rig</code> å’Œ <code>@rushstack/heft-web-rig</code>ï¼Œä½ çš„é¡¹ç›®åº”è¯¥åªéœ€è¦åšå°‘é‡çš„æ›´æ”¹ï¼Œå› ä¸ºæ›´æ–°åçš„ rigs ç°åœ¨æ˜¾å¼åŠ è½½æ‰€æœ‰è¿™äº›æ’ä»¶ã€‚å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ rigï¼Œè¿ç§»å·¥ä½œå°†ä¼šæ›´å¤æ‚ï¼Œä½†ä½ å¯ä»¥ä»æˆ‘ä»¬çš„ä¾‹å­ä¸­å¤åˆ¶ï¼š</p><ul><li><a href="https://github.com/microsoft/rushstack/blob/main/rigs/heft-node-rig/profiles/default/config/heft.json" target="_blank" rel="noopener noreferrer">heft-node-rig/profiles/default/config/heft.json</a></li><li><a href="https://github.com/microsoft/rushstack/blob/main/rigs/heft-web-rig/profiles/app/config/heft.json" target="_blank" rel="noopener noreferrer">heft-web-rig/profiles/app/config/heft.json</a></li></ul><h3 class="anchor anchorWithStickyNavbar_abXo" id="è¿ç§»-packagejson-ä¾èµ–">è¿ç§» package.json ä¾èµ–<a href="#è¿ç§»-packagejson-ä¾èµ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>è®¸å¤šæ’ä»¶å·²ç»è¢«æå–åˆ°å®ƒä»¬è‡ªå·±çš„ NPM åŒ…ä¸­ã€‚è¿™å‡å°‘äº†å¯¹æŸäº›æ’ä»¶ä¸ä½¿ç”¨çš„é¡¹ç›®çš„å¯åŠ¨æ—¶é—´å’Œå®‰è£…å ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯å†™ä½œæ—¶çš„å½“å‰åº“å­˜ï¼š</p><ul><li><a href="https://github.com/microsoft/rushstack/tree/main/apps/heft" target="_blank" rel="noopener noreferrer">@rushstack/heft</a>ï¼šå…¶<a href="https://github.com/microsoft/rushstack/blob/main/apps/heft/heft-plugin.json" target="_blank" rel="noopener noreferrer">heft-plugin.json</a>å®šä¹‰äº†å¤šä¸ªæ’ä»¶ copy-files-pluginã€delete-files-pluginã€node-service-pluginã€run-script-plugin</li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-api-extractor-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-api-extractor-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-dev-cert-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-dev-cert-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-jest-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-jest-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-lint-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-lint-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-sass-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-sass-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-serverless-stack-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-serverless-stack-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-storybook-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-storybook-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-typescript-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-typescript-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-webpack4-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-webpack4-plugin</a></li><li><a href="https://github.com/microsoft/rushstack/tree/main/heft-plugins/heft-webpack5-plugin" target="_blank" rel="noopener noreferrer">@rushstack/heft-webpack5-plugin</a></li></ul><h3 class="anchor anchorWithStickyNavbar_abXo" id="è¿ç§»ç‹¬ç«‹çš„-heftjson">è¿ç§»ç‹¬ç«‹çš„ heft.json<a href="#è¿ç§»ç‹¬ç«‹çš„-heftjson" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æ—§çš„ <strong>heft.json</strong> åŒºåˆ†äº†"äº‹ä»¶åŠ¨ä½œ"ï¼ˆå³å†…ç½®ä»»åŠ¡ï¼‰å’Œ"heftPlugins"ï¼ˆå³æ¥è‡ªæ’ä»¶åŒ…çš„ä»»åŠ¡ï¼‰ã€‚</p><p><strong>æ—§çš„ï¼š</strong> <code>heft-node-rig</code> ä¸­çš„ <strong>heft.json</strong> æ‘˜å½•</p><div class="language-ts codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-ts codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// âš ï¸ æ—§æ ¼å¼ç¤ºä¾‹ -- è¯·å‹¿ä½¿ç”¨ï¼âš ï¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/heft.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// "deleteGlobs" æŒ‡å®šåœ¨ "clean" äº‹ä»¶ä¸‹è¿è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"eventActions"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [1] æ—§çš„æ¸…ç†æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"actionKind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"deleteGlobs"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"heftEvent"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"clean"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"actionId"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"defaultClean"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"globsToDelete"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"dist"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"lib"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"lib-commonjs"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"temp"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Jest æ’ä»¶ä½¿ç”¨ "heftPlugins" éƒ¨åˆ†åŠ è½½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å¹¶ä¸”å®ƒçš„äº‹ä»¶åºåˆ—æ˜¯ä½¿ç”¨ç¨‹åºé€»è¾‘å®šä¹‰çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"heftPlugins"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [2] æ—§çš„åŠ è½½æ’ä»¶æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"plugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-jest-plugin"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>æ–°çš„ï¼š</strong> <code>heft-node-rig</code> ä¸­çš„ <strong>heft.json</strong> æ‘˜å½•</p><div class="language-ts codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-ts codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"phasesByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ("build" æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"build"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [1] æ–°çš„æ¸…ç†æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"cleanFiles"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"sourcePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dist"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"sourcePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"lib"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"sourcePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"lib-commonjs"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"tasksByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ("typescript" æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"typescript"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-typescript-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"lint"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"typescript"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-lint-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"api-extractor"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"typescript"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-api-extractor-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"node-service"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"typescript"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// è¿™ä¸ªå†…ç½®æ’ä»¶æŒ‡å®š "@rushstack/heft" ä½œä¸ºå®ƒçš„åŒ…åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"node-service-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ("test" æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"test"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"phaseDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"build"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"tasksByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ("jest" æ˜¯ç”¨æˆ·å®šä¹‰çš„ä»»åŠ¡åç§°)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"jest"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [2] æ–°çš„åŠ è½½æ’ä»¶æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-jest-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§‚å¯Ÿä¸Šé¢çš„ç¤ºä¾‹ï¼Œä¸»è¦çš„æ›´æ”¹æœ‰ï¼š</p><ul><li>æ¯ä¸ªä»»åŠ¡å¿…é¡»ä» <code>pluginPackage</code> ä¸­æ˜¾å¼åŠ è½½ï¼Œå› æ­¤ rig çš„ <strong>heft.json</strong> ç°åœ¨æ›´å†—é•¿ï¼ˆä½†æ›´æ˜“ç†è§£ï¼ï¼‰</li><li>å†…ç½®ä»»åŠ¡ï¼ˆä¾‹å¦‚ <code>node-service</code>ï¼‰ä¸å¤–éƒ¨æ’ä»¶å…·æœ‰ç›¸åŒçš„è§„èŒƒ</li><li>æ—§çš„ <code>"heftEvent"</code> ç”Ÿå‘½å‘¨æœŸå·²è¢« <code>phaseDependencies</code> å’Œ <code>taskDependencies</code> å–ä»£ï¼Œå…¶ä¾èµ–å›¾ç¡®å®šäº†ä»»åŠ¡çš„é¡ºåº</li></ul><p>å®Œæ•´çš„é…ç½®æ–‡ä»¶å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š<a href="https://github.com/microsoft/rushstack/blob/main/rigs/heft-node-rig/profiles/default/config/heft.json" target="_blank" rel="noopener noreferrer">heft-node-rig/profiles/default/config/heft.json</a></p><h3 class="anchor anchorWithStickyNavbar_abXo" id="è¿ç§»å·²é…ç½®çš„-heftjson">è¿ç§»å·²é…ç½®çš„ heft.json<a href="#è¿ç§»å·²é…ç½®çš„-heftjson" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>è¿™æ˜¯æ¥è‡ª<a href="https://tsdoc.org/play/" target="_blank" rel="noopener noreferrer">TSDoc Playground</a>é¡¹ç›®çš„å¦ä¸€ä¸ªç¤ºä¾‹ï¼Œå®ƒçš„ <a href="https://github.com/microsoft/tsdoc/blob/main/playground/config/heft.json" target="_blank" rel="noopener noreferrer">heft.json</a> ç»§æ‰¿è‡ªæˆ‘ä»¬çš„ <code>heft-web-rig</code>ï¼š</p><p><strong>æ—§çš„ï¼š</strong> <code>playground/config/heft.json</code> ä¸­çš„ <strong>heft.json</strong> æ‘˜å½•</p><div class="language-ts codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-ts codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// âš ï¸ æ—§æ ¼å¼ç¤ºä¾‹ -- è¯·å‹¿ä½¿ç”¨ï¼âš ï¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/heft.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-web-rig/profiles/library/config/heft.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"eventActions"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"actionId"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"copyLicenseToDistFolder"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"actionKind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"copyFiles"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [3] æ—§çš„ç¼–è¯‘åæ“ä½œæ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"heftEvent"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"compile"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"copyOperations"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"destinationFolders"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"./dist"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [4] æ—§çš„æŒ‡å®šæºæ–‡ä»¶å¤¹æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"sourceFolder"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">".."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"includeGlobs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LICENSE"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>æ–°çš„ï¼š</strong> <code>playground/config/heft.json</code> ä¸­çš„ <strong>heft.json</strong> æ‘˜å½•</p><div class="language-ts codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-ts codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-web-rig/profiles/library/config/heft.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"phasesByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ("build" æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"build"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"tasksByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ("post-compile-copy" æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"post-compile-copy"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [3] æ–°çš„ç¼–è¯‘åæ“ä½œæ–¹å¼ï¼Œé€šè¿‡ä¾èµ–äºç›¸å…³ä»»åŠ¡æ¥å®ç°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// åœ¨ "typescript" å®Œæˆåæ‰åº”è¿è¡Œ "post-compile-copy" ä»»åŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"typescript"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"copy-files-plugin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"options"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string-property property" style="color:#36acaa">"copyOperations"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [4] æ–°çš„æŒ‡å®šæºæ–‡ä»¶å¤¹ï¼ˆæˆ–æ–‡ä»¶è·¯å¾„ï¼‰çš„æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">"sourcePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">".."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">"destinationFolders"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"./dist"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">"includeGlobs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LICENSE"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§‚å¯Ÿï¼š</p><ul><li>è¿™é‡Œçš„æ›´æ”¹å¾ˆå°ï¼Œå› ä¸º rig æä¾›äº†å¤§éƒ¨åˆ†çš„æ„å»ºå®šä¹‰</li><li>æœ€æ–°çš„ <code>heft-web-rig</code> ä½¿ç”¨äº† <code>heft-webpack5-plugin</code>ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è½¬æ¢è¿‡ç¨‹ä¸­ä» Webpack 4 å‡çº§åˆ° 5</li><li><code>"heftEvent": "compile"</code> äº‹ä»¶ä¸å†å­˜åœ¨ï¼›ç›¸åï¼Œå®ƒå¿…é¡»é€šè¿‡ç­‰æ•ˆçš„ <code>"taskDependencies"</code> æ¡ç›®æ¥è¡¨ç¤ºï¼Œè¯¥æ¡ç›®å¼•ç”¨äº† rig çš„ <code>"typescript"</code> ä»»åŠ¡å®šä¹‰</li></ul><h3 class="anchor anchorWithStickyNavbar_abXo" id="è¿ç§»pre-compileæ“ä½œ">è¿ç§»"pre-compile"æ“ä½œ<a href="#è¿ç§»pre-compileæ“ä½œ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å°† <code>"heftEvent": "compile"</code> æ›¿æ¢ä¸º <code>"taskDependencies": ["typescript"]</code> è¿›è¡Œäº†é…ç½®æ–‡ä»¶çš„è¿ç§»ï¼Œé€šè¿‡è¡¨è¾¾åœ¨ <code>"typescript"</code> ä»»åŠ¡å®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œè¯¥æ“ä½œã€‚ä½†æ˜¯ <code>"taskDependencies"</code> æ˜¯å•å‘å…³ç³»ã€‚åœ¨è¿™ç§æ–°æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºè¯¸å¦‚ <code>pre-compile</code> è¿™æ ·çš„äº‹ä»¶å‘¢ï¼Ÿ</p><p>è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š</p><p><strong>æ—§ç‰ˆ:</strong> <strong>heft.json</strong> æ ·æœ¬</p><div class="language-ts codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-ts codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// âš ï¸ æ—§æ ¼å¼ç¤ºä¾‹ -- è¯·å‹¿ä½¿ç”¨ï¼âš ï¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/heft.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-web-rig/profiles/app/config/heft.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"eventActions"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"actionKind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"copyFiles"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"actionId"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"copyAssets"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [5] æ—§çš„æ‰§è¡Œ"pre-compile"æ“ä½œçš„æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"heftEvent"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"pre-compile"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"copyOperations"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"sourceFolder"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"node_modules/some-library/dist"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"destinationFolders"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"temp/typings"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"includeGlobs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"*.d.ts"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>æ–°ç‰ˆ:</strong> <strong>heft.json</strong> æ ·æœ¬</p><div class="language-ts codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-ts codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-web-rig/profiles/app/config/heft.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"phasesByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ("build" æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"build"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"tasksByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ("pre-compile-copy" æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"pre-compile-copy"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"copy-files-plugin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"options"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string-property property" style="color:#36acaa">"copyOperations"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">"sourcePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"node_modules/some-library/dist"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">"destinationFolders"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"temp/typings"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">"includeGlobs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"*.d.ts"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ("typescript" æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œæœ€åˆåœ¨ rig ä¸­å®šä¹‰)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"typescript"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// ğŸ“Œ [5] æ–°çš„æ‰§è¡Œ"pre-compile"æ“ä½œçš„æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// "typescript" ä»»åŠ¡åœ¨ "pre-compile-copy" å®Œæˆä¹‹åæ‰èƒ½è¿è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"pre-compile-copy"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¾›å‚è€ƒï¼Œ<code>@rushstack/heft-web-rig</code> å¦‚ä¸‹å®šä¹‰äº† <code>"typescript"</code> ä»»åŠ¡ï¼š</p><p><a href="https://github.com/microsoft/rushstack/blob/main/rigs/heft-web-rig/profiles/app/config/heft.json" target="_blank" rel="noopener noreferrer">heft-web-rig/profiles/app/config/heft.json</a> æ‘˜å½•</p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"typescript"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"taskDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"sass"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-typescript-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§‚å¯Ÿï¼š</p><ul><li>å›æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ä¸ºè‡ªå·±çš„ä»»åŠ¡æŒ‡å®š <code>taskDependencies</code>ï¼ˆ<code>"taskDependencies": ["typescript"]</code>ï¼‰æ¥å®ç°äº† <code>"post-compile-copy"</code>ã€‚</li><li>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ä¿®æ”¹ rig çš„ <code>"typescript"</code> ä»»åŠ¡çš„ <code>taskDependencies</code>ï¼ˆ<code>"taskDependencies": ["pre-compile-copy"]</code>ï¼‰æ¥å®ç° <code>"pre-compile-copy"</code>ã€‚</li><li>rig å·²ç»æœ‰ <code>"taskDependencies": ["sass"]</code>ã€‚ä½†æˆ‘ä»¬ä¸éœ€è¦æŒ‡å®š <code>"taskDependencies": ["typescript", "sass"]</code>ï¼Œå› ä¸º Heft çš„é…ç½®è§£æå™¨é»˜è®¤ä¼šé€šè¿‡è¿½åŠ è€Œä¸æ˜¯æ›¿æ¢çš„æ–¹å¼åˆå¹¶æ•°ç»„ã€‚</li><li>è¿™ç§åˆå¹¶è¡Œä¸ºç”± <code>@rushstack/heft-config-file</code> å®ç°ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨<a href="/zh-cn/blog/2023/06/15/heft-whats-new/#heftjson-property-inheritance-directives">å±æ€§ç»§æ‰¿æŒ‡ä»¤</a>è¿›è¡Œè‡ªå®šä¹‰ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_abXo" id="è¿ç§»å‘½ä»¤è¡Œè¯­æ³•">è¿ç§»å‘½ä»¤è¡Œè¯­æ³•<a href="#è¿ç§»å‘½ä»¤è¡Œè¯­æ³•" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ—§çš„ <code>--watch</code> å‘½ä»¤è¡Œå‚æ•°å·²è¢«ç§»é™¤ã€‚ç°åœ¨ï¼Œå¯ä»¥é€šè¿‡åœ¨æ“ä½œåç§°åé™„åŠ  <code>-watch</code> æ¥å¯ç”¨ç›‘å¬æ¨¡å¼ã€‚</p><p><strong>æ—§çš„ï¼š</strong></p><div class="language-shell codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-shell codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">heft build --watch --verbose</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>æ–°çš„ï¼š</strong></p><div class="codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-text codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">heft build-watch --verbose</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_abXo" id="å‘½ä»¤åˆ«å">å‘½ä»¤åˆ«å<a href="#å‘½ä»¤åˆ«å" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨æ—§çš„è®¾è®¡ä¸­ï¼Œ<code>heft start</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šæ“ä½œï¼Œç”¨äºå¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚åœ¨æ–°çš„è®¾è®¡ä¸­ï¼Œå®ƒæ˜¯åœ¨ <strong>heft.json</strong> ä¸­å®šä¹‰çš„å‘½ä»¤åˆ«åã€‚æ–°çš„åˆ«åç³»ç»Ÿå…è®¸æ‚¨å®šä¹‰è‡ªå·±çš„è‡ªå®šä¹‰åˆ«åï¼Œä»¥ç¼©çŸ­å¸¸ç”¨å‘½ä»¤çš„é•¿åº¦ã€‚</p><p><a href="https://github.com/microsoft/rushstack/blob/main/rigs/heft-web-rig/profiles/app/config/heft.json" target="_blank" rel="noopener noreferrer">heft-web-rig/profiles/app/config/heft.json</a> æ‘˜å½•</p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å°† "heft start" å®šä¹‰ä¸º "heft build-watch --serve" çš„åˆ«åã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"aliasesByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"actionName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"build-watch"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"defaultParameters"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"--serve"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>--serve</code> CLI å‚æ•°æ˜¯æˆ‘ä»¬å¯åŠ¨<code>localhost</code>å¼€å‘æœåŠ¡å™¨çš„æ ‡å‡†çº¦å®šã€‚å®ƒè¢«<code>heft-webpack5-plugin</code>å’Œå†…ç½®çš„<code>node-service-plugin</code>æ‰€æ”¯æŒã€‚</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="è¿ç§»è‡ªå®šä¹‰æ’ä»¶">è¿ç§»è‡ªå®šä¹‰æ’ä»¶<a href="#è¿ç§»è‡ªå®šä¹‰æ’ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨æ›´æ–°åˆ°æ–°ç‰ˆæœ¬çš„ Heft æ—¶ï¼Œæ’ä»¶ä¹Ÿéœ€è¦è¿›è¡Œå…¼å®¹æ€§æ›´æ–°ã€‚ä¸€äº›è¾ƒä¸ºæ˜¾è‘—çš„ API æ›´æ”¹åŒ…æ‹¬ï¼š</p><ul><li><strong>heft-plugin.json</strong>æ¸…å•æ–‡ä»¶å¿…é¡»éšæ’ä»¶åŒ…ä¸€èµ·æä¾›ã€‚å¦‚æœæ‰¾ä¸åˆ°<strong>heft-plugin.json</strong>æ–‡ä»¶ï¼ŒHeft å°†æŠ¥å‘Šé”™è¯¯ã€‚</li><li>æ’ä»¶ç±»å¿…é¡»å…·æœ‰æ— å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯<strong>heft-plugin.json</strong>ä¸­çš„<code>entryPoint</code>å±æ€§æŒ‡å‘çš„æ–‡ä»¶çš„é»˜è®¤å¯¼å‡ºã€‚</li><li>ç°åœ¨å¯ä»¥ä½¿ç”¨<strong>heft-plugin.json</strong>ä¸­çš„<code>optionsSchema</code>å±æ€§æŒ‡å®šåœ¨<strong>heft.json</strong>ä¸­æä¾›çš„é€‰é¡¹çš„æ¨¡å¼æ–‡ä»¶ï¼Œå¹¶ä¸” Heft å°†å¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚</li><li>å‚æ•°ç°åœ¨åœ¨<strong>heft-plugin.json</strong>ä¸­å®šä¹‰ï¼Œå¹¶ä¸”é€šè¿‡æ’ä»¶çš„<code>IHeftTaskSession.parameters</code>æˆ–<code>IHeftLifecycleSession.parameters</code>å±æ€§æ¥ä½¿ç”¨ã€‚
<em>æ³¨æ„ï¼šé™¤äº†é»˜è®¤çš„ Heft å‚æ•°å¤–ï¼Œåªæœ‰è°ƒç”¨æ’ä»¶å®šä¹‰çš„å‚æ•°æ˜¯å¯è®¿é—®çš„</em></li><li>æ’ä»¶ä¸å†èƒ½å¤Ÿå®šä¹‰è‡ªå·±çš„æ“ä½œã€‚å¦‚æœæ’ä»¶éœ€è¦è‡ªå·±çš„æ“ä½œï¼Œåº”å°†ä¸“ç”¨é˜¶æ®µæ·»åŠ åˆ°æ¶ˆè´¹è€…çš„<strong>heft.json</strong>ä¸­ã€‚</li><li><code>runScript</code> Heft äº‹ä»¶å·²è¢«ä¿®æ”¹ï¼Œä»…æ¥å—<code>runAsync</code>æ–¹æ³•ï¼Œå¹¶ä¸”å±æ€§å·²æ›´æ–°ä»¥åæ˜ å¸¸è§„ Heft ä»»åŠ¡æ’ä»¶å¯ç”¨çš„å†…å®¹ã€‚</li><li>ä¸è·¯å¾„ç›¸å…³çš„å˜é‡å·²é‡å‘½åä»¥æ˜ç¡®è¡¨ç¤ºå®ƒä»¬æ˜¯è·¯å¾„ï¼ˆä¾‹å¦‚ï¼Œ<code>HeftConfiguration.buildFolder</code>ç°åœ¨æ˜¯<code>HeftConfiguration.buildFolderPath</code>ï¼‰</li><li><code>runIncremental</code>é’©å­ç°åœ¨å¯ä»¥ç”¨äºç¡®ä¿æŒ‰æ­£ç¡®çš„ä¾èµ–é¡ºåºè¿›è¡Œç›‘è§†æ¨¡å¼çš„é‡å»º</li><li><code>clean</code>é’©å­å·²è¢«åˆ é™¤ï¼Œä»¥ä¾¿ä½¿ç”¨<strong>heft.json</strong>ä¸­çš„<code>cleanFiles</code>é€‰é¡¹æ¸…é™¤æ–‡ä»¶ï¼Œä»¥ä¾¿æ˜ç¡®æŒ‡å®šæ­£åœ¨æ¸…é™¤çš„æ–‡ä»¶å’Œæ—¶é—´</li><li>ä½œä¸ºåæœï¼Œæ’ä»¶ä¸å†èƒ½å¤Ÿä»¥ç¼–ç¨‹æ–¹å¼è®¡ç®—<code>heft clean</code>å‘½ä»¤è¦æ¸…é™¤çš„æ–‡ä»¶å¤¹ï¼›å…¶è¡Œä¸ºç”±é™æ€é…ç½®æ–‡ä»¶é¢„å…ˆç¡®å®šï¼Œä»è€Œä½¿æ•´ä¸ªç³»ç»Ÿæ›´ç®€å•å’Œæ›´å¯é¢„æµ‹ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_abXo" id="å…¶ä»–è¿ç§»è¯´æ˜">å…¶ä»–è¿ç§»è¯´æ˜<a href="#å…¶ä»–è¿ç§»è¯´æ˜" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>åœ¨<strong>jest.config.json</strong>ä¸­ï¼Œå·²åˆ é™¤<code>folderNameForTests</code>å’Œ<code>extensionForTests</code>å±æ€§ï¼Œåº”æ”¹ç”¨<code>testMatch</code>å±æ€§å¤„ç†ã€‚</li><li>å†…ç½®çš„<code>node-service-plugin</code>ç°åœ¨æ”¯æŒ<code>--serve</code>å‚æ•°ï¼Œä»¥ä¿æŒä¸<code>@rushstack/heft-webpack5-plugin</code>å¼€å‘æœåŠ¡å™¨çš„ä¸€è‡´æ€§ã€‚</li><li>å¦‚æœæŒ‡å®šäº†<code>--serve</code>å¹¶ä¸”çœç•¥äº†<code>config/node-service.json</code>ï¼Œé‚£ä¹ˆ<code>node-service-plugin</code>å°†ä»¥ç¡¬é”™è¯¯å¤±è´¥ã€‚</li><li>å°½ç®¡<code>@rushstack/heft-lint-plugin</code>å’Œ<code>@rushstack/heft-typescript-plugin</code>å·²åˆ†åˆ«æå–åˆ°å•ç‹¬çš„ NPM åŒ…ä¸­ï¼Œä½†å®ƒä»¬å¿…é¡»</li></ul>]]></content:encoded>
            <category>heft</category>
        </item>
        <item>
            <title><![CDATA[Heft 0.51ä¸­çš„æ–°åŠŸèƒ½]]></title>
            <link>https://rushstack.io/zh-cn/blog/2023/06/15/heft-whats-new</link>
            <guid>https://rushstack.io/zh-cn/blog/2023/06/15/heft-whats-new</guid>
            <pubDate>Thu, 15 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA["å¤šé˜¶æ®µ" Heft æ˜¯ @rushstack/heft é¡¹ç›®çš„ä¸€æ¬¡é‡å¤§æ›´æ–°ï¼Œç›®æ ‡æ˜¯ä¸ Rush åˆ†é˜¶æ®µæ„å»º æ›´ç´§å¯†åœ°é›†æˆã€‚æ­¤å¤–ï¼Œè¿™æ¬¡æ›´æ–°ä¸º Heft å¸¦æ¥äº†æ›´å¤§çš„å¯å®šåˆ¶æ€§å’Œæ”¹è¿›çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚è¿™ç¯‡æ–‡ç« è§£é‡Šäº†è¿™äº›æ”¹è¿›èƒŒåçš„åŠ¨æœºå’Œæ¶æ„ã€‚]]></description>
            <content:encoded><![CDATA[<p>"å¤šé˜¶æ®µ" Heft æ˜¯ <code>@rushstack/heft</code> é¡¹ç›®çš„ä¸€æ¬¡é‡å¤§æ›´æ–°ï¼Œç›®æ ‡æ˜¯ä¸ <a href="https://rushjs.io/pages/maintainer/phased_builds/" target="_blank" rel="noopener noreferrer">Rush åˆ†é˜¶æ®µæ„å»º</a> æ›´ç´§å¯†åœ°é›†æˆã€‚æ­¤å¤–ï¼Œè¿™æ¬¡æ›´æ–°ä¸º Heft å¸¦æ¥äº†æ›´å¤§çš„å¯å®šåˆ¶æ€§å’Œæ”¹è¿›çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚è¿™ç¯‡æ–‡ç« è§£é‡Šäº†è¿™äº›æ”¹è¿›èƒŒåçš„åŠ¨æœºå’Œæ¶æ„ã€‚</p><blockquote><p>å¯¹äºå‡çº§æŒ‡å—ï¼Œè¯·å‚é˜…<a href="/zh-cn/blog/2023/06/16/heft-migration-guide/">Heft 0.51 è¿ç§»æŒ‡å—</a>æ–‡ç« ã€‚</p></blockquote><p>æ›´æ–°ç‰ˆæœ¬çš„ Heft æ”¹è¿›äº†ä¸€äº›å…³é”®é¢†åŸŸï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>å¼€å‘è€…å®šä¹‰çš„ Heft æ’ä»¶å’Œ Heft äº‹ä»¶çš„æ‰§è¡Œé¡ºåº</li><li>é€šè¿‡<code>--to</code>æˆ–<code>--only</code>ç­‰èŒƒå›´å‚æ•°å¯¹ Heft æ“ä½œçš„éƒ¨åˆ†æ‰§è¡Œ</li><li>ç®€åŒ–çš„æ’ä»¶ APIï¼Œæ–¹ä¾¿å¼€å‘è€…åˆ¶ä½œ Heft æ’ä»¶</li><li>é€šè¿‡<strong>heft-plugin.json</strong>æ˜ç¡®å®šä¹‰æ‰€æœ‰ Heft æ’ä»¶</li><li>ä¸ºåœ¨ä¸€ä¸ªæ’ä»¶åŒ…å†…å®šä¹‰å¤šä¸ªæ’ä»¶æä¾›äº†åŸç”Ÿæ”¯æŒ</li><li>æ”¹è¿›äº†æ’ä»¶å‚æ•°çš„å¤„ç†</li><li>åœ¨ Heft æ“ä½œä¸­æä¾›äº†å¯¹å¢é‡è§‚å¯Ÿæ¨¡å¼çš„åŸç”Ÿæ”¯æŒ</li><li>é™ä½äº†å¼€é”€å¹¶æ”¹è¿›äº†æ€§èƒ½</li><li>è¿˜æœ‰æ›´å¤šï¼</li></ul><h2 class="anchor anchorWithStickyNavbar_abXo" id="heft-ä»»åŠ¡">Heft ä»»åŠ¡<a href="#heft-ä»»åŠ¡" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>Heft ä»»åŠ¡æ˜¯åœ¨<strong>heft.json</strong>ä¸­æŒ‡å®šçš„æœ€å°å·¥ä½œå•å…ƒã€‚Heft ä»»åŠ¡å¯èƒ½ä¾èµ–äºåŒä¸€é˜¶æ®µå†…çš„å…¶ä»–ä»»åŠ¡ï¼Œæ‰€æœ‰ä»»åŠ¡ä¾èµ–å¿…é¡»åœ¨ä¾èµ–ä»»åŠ¡æ‰èƒ½æ‰§è¡Œä¹‹å‰å®Œæˆæ‰§è¡Œã€‚</p><p>åœ¨è¿‡å»çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åŒºåˆ†äº†å†…ç½®ä»»åŠ¡ï¼ˆ<code>copy-files-plugin</code>ï¼Œ<code>node-service-plugin</code>ç­‰ï¼‰ä¸ä»æ’ä»¶åŒ…ä¸­åŠ è½½çš„ç¬¬ä¸‰æ–¹ä»»åŠ¡ã€‚ä» Heft 0.53.0 å¼€å§‹ï¼Œä¸¤ç§ä»»åŠ¡ç°åœ¨éƒ½ä»¥ç›¸åŒçš„æ–¹å¼å£°æ˜ã€‚å†…ç½®æ’ä»¶åªéœ€ä¸ºä»–ä»¬çš„æ’ä»¶<code>packageName</code>æŒ‡å®š<code>@rushstack/heft</code>å³å¯ã€‚</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="heft-é˜¶æ®µ">Heft é˜¶æ®µ<a href="#heft-é˜¶æ®µ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>Heft é˜¶æ®µå®šä¹‰äº†åœ¨æ‰§è¡Œè¯¥é˜¶æ®µæ—¶å°†è¿è¡Œçš„ä¸€ç»„ä»»åŠ¡ã€‚é˜¶æ®µå……å½“ä¸€ç»„é€»è¾‘ä»»åŠ¡çš„é›†åˆï¼Œè¿™äº›ä»»åŠ¡åœ¨åˆç†çš„æƒ…å†µä¸‹ï¼ˆä½†ä¸ä¸€å®šï¼‰æ˜ å°„åˆ°<a href="https://rushjs.io/pages/maintainer/phased_builds/" target="_blank" rel="noopener noreferrer">Rush é˜¶æ®µ</a>ã€‚Heft é˜¶æ®µå¯èƒ½ä¾èµ–äºå…¶ä»–é˜¶æ®µï¼Œå½“æ‰§è¡Œå¤šä¸ªé˜¶æ®µæ—¶ï¼Œæ‰€æœ‰é€‰å®šçš„é˜¶æ®µå¿…é¡»å®Œæˆæ‰§è¡Œï¼Œæ‰èƒ½æ‰§è¡Œä¾èµ–çš„é˜¶æ®µã€‚</p><p><strong>heft.json</strong>æ–‡ä»¶æ˜¯å®šä¹‰ç»™å®šé¡¹ç›®æˆ–è£…å¤‡çš„é˜¶æ®µå’Œä»»åŠ¡çš„åœ°æ–¹ã€‚ç”±äºæ­¤æ–‡ä»¶åŒ…å«é˜¶æ®µå’Œä»»åŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œå› æ­¤å®ƒå®šä¹‰äº†æ‰§è¡Œ Heft æ“ä½œçš„æ“ä½œé¡ºåºã€‚</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="heft-æ“ä½œ">Heft æ“ä½œ<a href="#heft-æ“ä½œ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ä½¿ç”¨ä¸ Rush ç±»ä¼¼çš„æ‰©å±•é€»è¾‘ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨<code>heft run</code>æ“ä½œæ¥æ‰§è¡Œä¸€ç»„ Heft é˜¶æ®µã€‚æ­¤æ“ä½œæŒ‰é˜¶æ®µä¾èµ–å…³ç³»çš„é¡ºåºæ‰§è¡Œä¸€ç»„é€‰å®šçš„é˜¶æ®µã€‚å¦‚æœé€‰å®šçš„é˜¶æ®µäº’ä¸ä¾èµ–ï¼Œé‚£ä¹ˆå°†å¹¶è¡Œæ‰§è¡Œå®ƒä»¬ã€‚é€‰æ‹©å‚æ•°åŒ…æ‹¬ï¼š</p><ul><li><code>--only</code> - æ‰§è¡ŒæŒ‡å®šçš„é˜¶æ®µ</li><li><code>--to</code> - æ‰§è¡ŒæŒ‡å®šçš„é˜¶æ®µåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹</li></ul><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤åé™„åŠ <code>-- &lt;å‚æ•°&gt;</code>æ¥ä¸º<code>heft run</code>æ“ä½œæä¾›ä»»åŠ¡å’Œé˜¶æ®µç‰¹å®šçš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œ<code>heft run --only build -- --clean</code>å°†ä»…è¿è¡Œ<code>build</code>é˜¶æ®µï¼Œå¹¶åœ¨æ‰§è¡Œé˜¶æ®µä¹‹å‰è¿›è¡Œæ¸…ç†ã€‚</p><p>æ­¤å¤–ï¼ŒHeft å°†ä¸ºåœ¨<strong>heft.json</strong>é…ç½®ä¸­æŒ‡å®šçš„æ¯ä¸ªé˜¶æ®µç”Ÿæˆæ“ä½œã€‚é€šè¿‡è¿è¡Œ<code>heft &lt;é˜¶æ®µåç§°&gt;</code>æ‰§è¡Œè¿™äº›æ“ä½œï¼Œå¹¶è¿è¡Œ Heft è‡³æŒ‡å®šçš„é˜¶æ®µï¼ŒåŒ…æ‹¬æ‰€æœ‰é˜¶æ®µä¾èµ–é¡¹ã€‚å› æ­¤ï¼Œè¿™äº›æ¨æ–­çš„ Heft æ“ä½œç›¸å½“äºè¿è¡Œ<code>heft run --to &lt;é˜¶æ®µåç§°&gt;</code>ï¼Œå¹¶ä¸”æ—¨åœ¨ä½œä¸º CLI çš„ç®€å†™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="è§‚å¯Ÿæ¨¡å¼">è§‚å¯Ÿæ¨¡å¼<a href="#è§‚å¯Ÿæ¨¡å¼" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ç°åœ¨ï¼Œè§‚å¯Ÿæ¨¡å¼å·²æˆä¸º Heft ä¸­çš„ä¸€é¡¹ä¸€ç­‰å…¬æ°‘ç‰¹æ€§ã€‚æ‰€æœ‰çš„ Heft æ“ä½œéƒ½åˆ›å»ºäº†è§‚å¯Ÿæ¨¡å¼æ“ä½œã€‚ä¾‹å¦‚ï¼Œè¦åœ¨è§‚å¯Ÿæ¨¡å¼ä¸‹è¿è¡Œ<code>build</code>å’Œ<code>test</code>é˜¶æ®µï¼Œå¯ä»¥ä½¿ç”¨<code>heft test-watch</code>æˆ–<code>heft run-watch --to test</code>ä¸­çš„ä»»ä¸€å‘½ä»¤ã€‚åœ¨è§‚å¯Ÿæ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼ŒHeft æ›´å–œæ¬¢<code>runIncremental</code>é’©å­è€Œé<code>run</code>é’©å­ï¼ˆå‚è§<a href="#heft%E4%BB%BB%E5%8A%A1%E6%8F%92%E4%BB%B6">Heft ä»»åŠ¡æ’ä»¶</a>ï¼‰ã€‚</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="heftjson-ç»“æ„">heft.json ç»“æ„<a href="#heftjson-ç»“æ„" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ‰€æœ‰é˜¶æ®µéƒ½åœ¨é¡¶çº§<code>phasesByName</code>å±æ€§å†…å®šä¹‰ã€‚æ¯ä¸ªé˜¶æ®µå¯èƒ½ä¼šæŒ‡å®š<code>phaseDependencies</code>ï¼Œä»¥å®šä¹‰åœ¨è¿è¡Œä¸€ç»„ Heft é˜¶æ®µæ—¶çš„é˜¶æ®µæ‰§è¡Œé¡ºåºã€‚é˜¶æ®µä¹Ÿå¯ä»¥æä¾›<code>cleanFiles</code>é€‰é¡¹ï¼Œè¯¥é€‰é¡¹æ¥å—ä¸€ä¸ªåˆ é™¤æ“ä½œæ•°ç»„ï¼Œåœ¨ä½¿ç”¨<code>--clean</code>æ ‡å¿—è¿è¡Œæ—¶æ‰§è¡Œã€‚</p><p>åœ¨é˜¶æ®µè§„æ ¼ä¸­ï¼Œ<code>tasksByName</code> å®šä¹‰äº†æ‰§è¡Œé˜¶æ®µæ—¶è¿è¡Œçš„æ‰€æœ‰ä»»åŠ¡ã€‚æ¯ä¸ªä»»åŠ¡å¯èƒ½ä¼šæŒ‡å®š <code>taskDependencies</code> æ¥å®šä¹‰ä»»åŠ¡æ‰§è¡Œçš„é¡ºåºã€‚ï¼ˆå¦‚æœçœç•¥äº† <code>taskDependencies</code>ï¼Œåˆ™é»˜è®¤ä¸º []ï¼Œå¹¶ä¸”ä»»åŠ¡åªç­‰å¾…åŒ…å«é˜¶æ®µçš„ä»»ä½• <code>phaseDependencies</code>ã€‚ï¼‰<code>taskDependencies</code> ä¸­å®šä¹‰çš„æ‰€æœ‰ä»»åŠ¡å¿…é¡»å­˜åœ¨äºåŒä¸€é˜¶æ®µã€‚ç”±äº CLI å¯ç”¨æ€§çš„åŸå› ï¼Œé˜¶æ®µåã€ä»»åŠ¡åã€æ’ä»¶åå’Œå‚æ•°èŒƒå›´ï¼Œå¿…é¡»æ˜¯ <code>kebab-cased</code>ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®šä¹‰äº†<code>build</code>å’Œ<code>test</code>é˜¶æ®µçš„"heft.json"æ–‡ä»¶ç¤ºä¾‹ï¼š</p><p><strong>heft.json</strong>å®šä¹‰é˜¶æ®µå’Œä»»åŠ¡çš„ç¤ºä¾‹</p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"base-project/config/heft.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// "phasesByName"å®šä¹‰äº†æ‰€æœ‰é˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µå®šä¹‰äº†è¦è¿è¡Œçš„ä»»åŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"phasesByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ("build"æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"build"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"phaseDescription"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"å¯¹æ„å»ºè¾“å‡ºè¿›è¡Œè½¬è¯‘å¹¶è¿è¡Œä¸€ä¸ªè¯­æ³•æ£€æŸ¥å™¨"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"cleanFiles"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"sourcePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"temp-build-output"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// "tasksByName"å®šä¹‰äº†é˜¶æ®µå†…çš„æ‰€æœ‰ä»»åŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"tasksByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ("typescript"æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"typescript"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-typescript-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"lint"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"typescript"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-lint-plugin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"eslint"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"copy-assets"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"copy-files-plugin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"options"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string-property property" style="color:#36acaa">"copyOperations"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// æ³¨æ„ï¼šåœ¨ä¹‹å‰çš„HEFTç‰ˆæœ¬ä¸­ï¼Œè¿™è¢«ç§°ä¸º"sourceFolder"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">"sourcePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"src/assets"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">"destinationFolders"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dist/assets"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ("test"æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"test"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"phaseDependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"build"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"phaseDescription"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"è¿è¡ŒJestæµ‹è¯•ï¼Œå¦‚æœæä¾›çš„è¯ã€‚"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"tasksByName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ("jest"æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œä¸æ˜¯æ¨¡å¼å­—æ®µ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"jest"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">"taskPlugin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-jest-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”Ÿå‘½å‘¨æœŸæ’ä»¶åœ¨é¡¶å±‚çš„<code>heftPlugins</code>æ•°ç»„ä¸­æŒ‡å®šã€‚æ’ä»¶å¯ä»¥é€šè¿‡æä¾›åŒ…åå’Œæ’ä»¶åæ¥å¼•ç”¨ã€‚å¦å¤–ï¼Œå¦‚æœä¸€ä¸ªåŒ…åªåŒ…å«ä¸€ä¸ªæ’ä»¶ï¼Œæ’ä»¶å¯ä»¥é€šè¿‡ä»…æä¾›åŒ…åæ¥å¼•ç”¨ï¼ŒHeft å°†è§£æä¸ºå”¯ä¸€å¯¼å‡ºçš„æ’ä»¶ã€‚ç”Ÿå‘½å‘¨æœŸæ’ä»¶ä¹Ÿå¯ä»¥æä¾›é€‰é¡¹æ¥ä¿®æ”¹é»˜è®¤è¡Œä¸ºã€‚</p><p><strong>heft.json</strong>åŠ è½½ç”Ÿå‘½å‘¨æœŸæ’ä»¶çš„ç¤ºä¾‹</p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"base-project/config/heft.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"heftPlugins"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-metrics-reporter"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"options"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">"disableMetrics"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"pluginPackage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@rushstack/heft-initialization-plugin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">"pluginName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-lifecycle-plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// (æ­¤å¤„ä¹Ÿå¯ä»¥å‡ºç°"phasesByName"éƒ¨åˆ†)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_abXo" id="heftjson-å±æ€§ç»§æ‰¿æŒ‡ä»¤">heft.json å±æ€§ç»§æ‰¿æŒ‡ä»¤<a href="#heftjson-å±æ€§ç»§æ‰¿æŒ‡ä»¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ä»¥å‰ï¼Œ<strong>heft.json</strong> æ–‡ä»¶ä¸å…¶æ‰©å±•çš„åŸºæœ¬æ–‡ä»¶ä¹‹é—´çš„å…±äº«å±æ€§å°†åˆå¹¶æ•°ç»„å’Œè¦†ç›–å¯¹è±¡ã€‚ç°åœ¨ï¼Œæ•°ç»„å’Œå¯¹è±¡éƒ½å°†åˆå¹¶ï¼Œå½“è‡ªå®šä¹‰æ‰©å±•åŸºæœ¬é…ç½®æ—¶ï¼Œç®€åŒ–äº†<strong>heft.json</strong>æ–‡ä»¶çš„ä½¿ç”¨ã€‚</p><p>å¦å¤–ï¼Œé…ç½®æ–‡ä»¶è§£æå™¨ç°åœ¨æ”¯æŒ<strong>å±æ€§ç»§æ‰¿æŒ‡ä»¤</strong>ï¼Œç”¨äºè‡ªå®šä¹‰åœ¨ä½¿ç”¨<code>"extends"</code>ç»§æ‰¿æ—¶ JSON å±æ€§å¦‚ä½•åˆå¹¶ã€‚è¿™ä¸ªç³»ç»Ÿç”± <a href="https://www.npmjs.com/package/@rushstack/heft-config-file" target="_blank" rel="noopener noreferrer">@rushstack/heft-config-file</a> åº“å®ç°ï¼Œå¹¶é€‚ç”¨äºæ‰€æœ‰ä½¿ç”¨è¯¥è§£æå™¨åŠ è½½çš„é…ç½®æ–‡ä»¶ã€‚è¦†ç›–æ˜¯é€šè¿‡ä½¿ç”¨å®šä¹‰ç»§æ‰¿è¡Œä¸ºçš„æŒ‡ä»¤æ¥æŒ‡å®šçš„ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨æ‰©å±•ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å…·æœ‰é¢„å…ˆå®šä¹‰çš„<code>exampleObject</code>å€¼ï¼ˆä¸€ä¸ªé”®å¯¹è±¡ï¼‰å’Œ<code>exampleArray</code>å€¼ï¼ˆä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼‰ï¼š</p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/v0/example-config-file.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"base-project/config/example-config-file.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$exampleObject.inheritanceType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"merge"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æœ‰æ•ˆé€‰æ‹©ä¸ºï¼š"merge", "replace"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"exampleObject"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"$exampleObjectMember.inheritanceType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"merge"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æœ‰æ•ˆé€‰æ‹©ä¸ºï¼š"merge", "replace"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"exampleObjectMember"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"$exampleArrayMember.inheritanceType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"append"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æœ‰æ•ˆé€‰æ‹©ä¸ºï¼š"append", "replace"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"exampleArrayMember"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"$exampleArray.inheritanceType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"replace"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æœ‰æ•ˆé€‰æ‹©ä¸ºï¼š"append", "replace"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"exampleArray"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸€æ—¦å¯¹è±¡è¢«è®¾ç½®ä¸ºè¦†ç›–çš„<code>inheritanceType</code>ï¼Œæ‰€æœ‰å­å±æ€§çš„<code>inheritanceType</code>å€¼å°†è¢«å¿½ç•¥ï¼Œå› ä¸ºæœ€é¡¶å±‚çš„å¯¹è±¡å·²ç»è¦†ç›–äº†æ‰€æœ‰å­å±æ€§ã€‚</p><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œåˆå¹¶é”®å¯¹è±¡å’Œæ•°ç»„æ—¶ä½¿ç”¨äº†ä¸åŒçš„<code>mergeBehavior</code>åŠ¨è¯ã€‚è¿™æ˜¯ä¸ºäº†æ˜ç¡®è¡¨ç¤ºæ•°ç»„å°†æŒ‰åŸæ ·è¿½åŠ ï¼Œåˆå¹¶è¿‡ç¨‹ä¸­ä¸è¿›è¡Œä»»ä½•é¢å¤–å¤„ç†ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæ•°ç»„åº”è¯¥æ˜¯ä¸€ç»„ï¼Œé‚£ä¹ˆä¸è¿›è¡Œé‡å¤ï¼‰ã€‚å¦‚æœéœ€è¦è¿™æ ·çš„è¡Œä¸ºï¼Œå¯ä»¥åœ¨å®ç°ç«¯å®Œæˆã€‚åœ¨<code>@rushstack/heft-config-file</code>åŒ…ä¸­å¯¹æ•°ç»„è¿›è¡Œé‡å¤å¤„ç†æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œå› ä¸ºå¯¹éåŸºå…ƒå¯¹è±¡çš„æ•°ç»„è¿›è¡Œé‡å¤å¤„ç†å¹¶ä¸å®¹æ˜“å®šä¹‰ã€‚</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="å…³è”çš„-npm-åŒ…">å…³è”çš„ NPM åŒ…<a href="#å…³è”çš„-npm-åŒ…" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è®¸å¤šä»¥å‰å†…ç½®äº Heft çš„ä»»åŠ¡ç°å·²è¢«æ‹†åˆ†åˆ°å•ç‹¬çš„ NPM åŒ…ä¸­ã€‚å®Œæ•´åˆ—è¡¨å¦‚ä¸‹ï¼š</p><ul><li><code>@rushstack/heft</code></li><li><code>@rushstack/heft-typescript-plugin</code></li><li><code>@rushstack/heft-lint-plugin</code></li><li><code>@rushstack/heft-api-extractor-plugin</code></li><li><code>@rushstack/heft-jest-plugin</code></li><li><code>@rushstack/heft-sass-plugin</code></li><li><code>@rushstack/heft-storybook-plugin</code></li><li><code>@rushstack/heft-webpack4-plugin</code></li><li><code>@rushstack/heft-webpack5-plugin</code></li><li><code>@rushstack/heft-dev-cert-plugin</code></li></ul><p>æ­¤å¤–ï¼ŒRushstack æä¾›çš„ rigs å·²æ›´æ–°ä»¥ä¸æ–°ç‰ˆæœ¬çš„ Heft å…¼å®¹ï¼š</p><ul><li><code>@rushstack/heft-node-rig</code></li><li><code>@rushstack/heft-web-rig</code></li></ul><h2 class="anchor anchorWithStickyNavbar_abXo" id="ç¼–å†™-heft-æ’ä»¶">ç¼–å†™ Heft æ’ä»¶<a href="#ç¼–å†™-heft-æ’ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_abXo" id="ç”Ÿå‘½å‘¨æœŸæ’ä»¶">ç”Ÿå‘½å‘¨æœŸæ’ä»¶<a href="#ç”Ÿå‘½å‘¨æœŸæ’ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>Heft ç”Ÿå‘½å‘¨æœŸæ’ä»¶ä¸ºæŸäº›ä¸ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é’©å­æä¾›å®ç°ã€‚è¿™äº›æ’ä»¶å°†åœ¨æ‰€æœ‰ Heft é˜¶æ®µä¸­ä½¿ç”¨ï¼Œå› æ­¤é™¤äº†å°‘æ•°ç‰¹å®šæƒ…å†µï¼ˆå¦‚ç”¨äºæŒ‡æ ‡æŠ¥å‘Šï¼‰ä¹‹å¤–ï¼Œåº”å¾ˆå°‘åœ¨å¤–éƒ¨ä½¿ç”¨ã€‚Heft ç”Ÿå‘½å‘¨æœŸæ’ä»¶æä¾›ä¸€ä¸ª <code>apply()</code> æ–¹æ³•ï¼Œæ’ä»¶å¯ä»¥åœ¨æ­¤å¤„æŒ‚è½½ä»¥ä¸‹ Tapable é’©å­ï¼š</p><ul><li><code>toolStart</code> - åœ¨ Heft æ‰§è¡Œå¼€å§‹æ—¶æä¾›ä¸æ’ä»¶ç›¸å…³çš„åŠŸèƒ½</li><li><code>toolFinish</code> - åœ¨æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œåœ¨ Heft æ‰§è¡Œç»“æŸæ—¶æä¾›ä¸æ’ä»¶ç›¸å…³çš„åŠŸèƒ½</li><li><code>recordMetrics</code> - åœ¨æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œå‘æ’ä»¶æä¾›æœ‰å…³ Heft è¿è¡Œçš„æŒ‡æ ‡ä¿¡æ¯</li></ul><h3 class="anchor anchorWithStickyNavbar_abXo" id="ä»»åŠ¡æ’ä»¶">ä»»åŠ¡æ’ä»¶<a href="#ä»»åŠ¡æ’ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>Heft ä»»åŠ¡æ’ä»¶ä¸º Heft ä»»åŠ¡æä¾›å®ç°ã€‚Heft æ’ä»¶æä¾›ä¸€ä¸ª <code>apply()</code> æ–¹æ³•ï¼Œæ’ä»¶å¯ä»¥åœ¨æ­¤å¤„æŒ‚è½½ä»¥ä¸‹ Tapable é’©å­ï¼š</p><ul><li><code>registerFileOperations</code> - åœ¨æ’ä»¶é¦–æ¬¡è¿è¡Œå‰ç¡®åˆ‡åœ°è°ƒç”¨ä¸€æ¬¡ã€‚å…è®¸æ’ä»¶ä½¿ç”¨ä¸ <code>copyFiles</code> å’Œ <code>deleteFiles</code> Heft äº‹ä»¶ç›¸åŒçš„é€‰é¡¹æ³¨å†Œå¤åˆ¶æˆ–åˆ é™¤æ“ä½œï¼ˆè¿™ä¸ªé’©å­å°±æ˜¯å®ç°è¿™äº›äº‹ä»¶çš„æ–¹å¼ï¼‰ã€‚</li><li><code>run</code> - æä¾›ä¸æ’ä»¶ç›¸å…³çš„ä»»åŠ¡åŠŸèƒ½</li><li><code>runIncremental</code> - åœ¨è§‚å¯Ÿæ¨¡å¼ä¸‹æä¾›ä¸æ’ä»¶ç›¸å…³çš„ä»»åŠ¡åŠŸèƒ½ã€‚å¦‚æœæ²¡æœ‰ä¸ºä»»åŠ¡æä¾› <code>runIncremental</code> å®ç°ï¼ŒHeft å°†åƒå¾€å¸¸ä¸€æ ·å›é€€åˆ°ä½¿ç”¨ <code>run</code> é’©å­ã€‚é€‰é¡¹ç»“æ„åŒ…æ‹¬ä¸¤ä¸ªç”¨äºæ”¯æŒè§‚å¯Ÿæ“ä½œçš„å‡½æ•°ï¼š<ul><li><code>requestRun()</code> - è¿™ä¸ªå‡½æ•°è¯·æ±‚ Heft è¿è¡Œæ—¶å®‰æ’æ’ä»¶æ‰€å±ä»»åŠ¡çš„æ–°è¿è¡Œï¼Œå¯èƒ½ä¼šå–æ¶ˆå½“å‰çš„æ„å»ºã€‚</li><li><code>watchGlobAsync(patterns, options)</code> - è¿™ä¸ªå‡½æ•°æ˜¯ä¸ºäº†æ–¹ä¾¿å¸¸è§çš„ç›‘è§† glob å˜åŒ–çš„æƒ…å†µè€Œæä¾›çš„ã€‚å®ƒè¿”å›ä¸€ä¸ª <code>Map&lt;string, IWatchedFileState&gt;</code>ï¼Œè¯¥æ˜ å°„æšä¸¾äº† glob é€‰å®šçš„æ–‡ä»¶ï¼ˆæˆ–æ–‡ä»¶å¤¹ï¼‰åˆ—è¡¨ï¼Œä»¥åŠå®ƒä»¬è‡ª</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_abXo" id="heft-pluginjson">heft-plugin.json<a href="#heft-pluginjson" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p><strong>heft-plugin.json</strong> é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªæ–°çš„ï¼Œå¿…éœ€çš„æ¸…å•æ–‡ä»¶ï¼Œæ‰€æœ‰ Heft æ’ä»¶åŒ…çš„åŒ…æ–‡ä»¶å¤¹ä¸­éƒ½å¿…é¡»å­˜åœ¨ã€‚æ­¤æ–‡ä»¶ç”¨äºå¤šç§ç”¨é€”ï¼ŒåŒ…æ‹¬å®šä¹‰æ‰€æœ‰åŒ…å«çš„ç”Ÿå‘½å‘¨æœŸæˆ–ä»»åŠ¡æ’ä»¶ï¼Œå®šä¹‰æ‰€æœ‰æ’ä»¶ç‰¹å®šçš„ CLI å‚æ•°ï¼Œå¹¶æä¾›ä¸€ä¸ªå¯é€‰çš„æ¨¡å¼æ–‡ä»¶ï¼Œä»¥éªŒè¯å¯ä»¥é€šè¿‡ <strong>heft.json</strong> ä¼ é€’çš„æ’ä»¶é€‰é¡¹ã€‚</p><p>ä»¥ä¸‹æ˜¯å®šä¹‰ç”Ÿå‘½å‘¨æœŸæ’ä»¶å’Œä»»åŠ¡æ’ä»¶çš„ç¤ºä¾‹ <strong>heft-plugin.json</strong> æ–‡ä»¶ï¼š</p><div class="language-json codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-json codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://developer.microsoft.com/json-schemas/heft/v0/heft-plugin.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"lifecyclePlugins"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"pluginName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-lifecycle-plugin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"entryPoint"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./lib/MyLifecyclePlugin.js"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"optionsSchema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./lib/schemas/mylifecycleplugin.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"parameterScope"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-lifecycle"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"parameters"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"parameterKind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"longName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"--my-string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"â€¦"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"argumentName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ARG_NAME"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"required"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"taskPlugins"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"pluginName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-task-plugin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"entryPoint"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./lib/MyTaskPlugin.js"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"optionsSchema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./lib/schemas/mytaskplugin.schema.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"parameterScope"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-task"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"parameters"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"parameterKind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"longName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"--my-other-string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"â€¦"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"argumentName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ARG_NAME"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"required"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_abXo" id="è·¨æ’ä»¶äº¤äº’">è·¨æ’ä»¶äº¤äº’<a href="#è·¨æ’ä»¶äº¤äº’" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æœ‰æ—¶æ’ä»¶ä¹‹é—´çš„äº¤æµä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œ<code>@rushstack/heft-lint-plugin</code> å’Œ <code>@rushstack/heft-typescript-plugin</code> å…±äº«ä¸€ä¸ª TypeScript çš„ <code>ts.Program</code> å¯¹è±¡ï¼Œè¿™æå¤§åœ°æé«˜äº†æ„å»ºæ—¶é—´ï¼Œå› ä¸ºé¿å…äº†ä¸¤æ¬¡è®¡ç®—ç¼–è¯‘å™¨çš„è¯­ä¹‰åˆ†æã€‚è¿™ç§ä¼˜åŒ–å¸¦æ¥äº†ä¸€ä¸ªçº¦æŸï¼Œé‚£å°±æ˜¯ä»»åŠ¡å¿…é¡»åœ¨æ‚¨çš„ <strong>heft.json</strong> é…ç½®ä¸­å…±äº«åŒä¸€ä¸ª Heft é˜¶æ®µã€‚</p><p>è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼ŸHeft æ’ä»¶å¯ä»¥ä½¿ç”¨ <code>requestAccessToPluginByName()</code> API æ¥è®¿é—®è¯·æ±‚çš„ <strong>æ’ä»¶è®¿é—®å™¨</strong>ã€‚è®¿é—®å™¨æ˜¯æ’ä»¶æä¾›ç»™å¤–éƒ¨ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ˜¯åˆ†äº«æ’ä»¶ç‰¹å®šä¿¡æ¯æˆ–æä¾›é¢å¤–æ’ä»¶åŠŸèƒ½çš„é’©å­çš„ç†æƒ³ä½ç½®ã€‚</p><p>åœ¨é˜¶æ®µæ‰§è¡Œå¼€å§‹æ—¶ï¼Œæ¸…ç†é’©å­æ‰§è¡Œä¹‹å‰ï¼Œæ»¡è¶³è®¿é—®è¯·æ±‚ã€‚å¦‚æœè¯·æ±‚çš„æ’ä»¶æ²¡æœ‰æä¾›è®¿é—®å™¨ï¼Œå°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ŒæŒ‡å‡ºç¼ºå°‘è®¿é—®å™¨çš„æ’ä»¶ã€‚ç„¶è€Œï¼Œå¦‚æœå®Œå…¨æ²¡æœ‰è¯·æ±‚çš„æ’ä»¶ï¼Œè®¿é—®è¯·æ±‚å°†é»˜é»˜åœ°å¤±è´¥ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†å…è®¸å¯¹å¤–éƒ¨æ’ä»¶è¿›è¡Œéå¿…éœ€çš„é›†æˆã€‚å› æ­¤ï¼Œå®ç°è·¨æ’ä»¶äº¤äº’çš„æ–¹å¼å¾ˆé‡è¦ï¼Œä»¥æœŸæœ›è¿™ç§æƒ…å†µï¼Œå¹¶ä¼˜é›…åœ°å¤„ç†ï¼Œæˆ–è€…æŠ›å‡ºä¸€ä¸ªæœ‰å¸®åŠ©çš„é”™è¯¯ã€‚</p><p>å¯è®¿é—®çš„æ’ä»¶åŸºäºèŒƒå›´è¿›è¡Œé™åˆ¶ã€‚å¯¹äºç”Ÿå‘½å‘¨æœŸæ’ä»¶ï¼Œæ‚¨å¯ä»¥è¯·æ±‚è®¿é—®æ·»åŠ åˆ° Heft é…ç½®ä¸­çš„ä»»ä½•å…¶ä»–ç”Ÿå‘½å‘¨æœŸæ’ä»¶ã€‚å¯¹äºä»»åŠ¡æ’ä»¶ï¼Œæ‚¨å¯ä»¥è¯·æ±‚è®¿é—® Heft é…ç½®ä¸­ç›¸åŒé˜¶æ®µå†…çš„ä»»ä½•å…¶ä»–ä»»åŠ¡æ’ä»¶ã€‚</p><h3 class="anchor anchorWithStickyNavbar_abXo" id="è‡ªå®šä¹‰-cli-å‚æ•°">è‡ªå®šä¹‰ CLI å‚æ•°<a href="#è‡ªå®šä¹‰-cli-å‚æ•°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>ç°åœ¨ï¼Œåªèƒ½é€šè¿‡ <strong>heft-plugin.json</strong> å®šä¹‰ CLI å‚æ•°ï¼Œè€Œå®šä¹‰çš„å‚æ•°å¯ä»¥é€šè¿‡ <code>HeftTaskSession.parameters</code> API åœ¨æ’ä»¶ä¸­ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œå½“ä½¿ç”¨ <code>--help</code> å‚æ•°ï¼ˆä¾‹å¦‚ <code>heft test --help</code> æˆ– <code>heft run --to test -- --help</code>ï¼‰æ—¶ï¼Œç°åœ¨å¯ä»¥åœ¨ CLI ä¸­å‘ç°é€‰å®šçš„ Heft é˜¶æ®µçš„æ‰€æœ‰æ’ä»¶å‚æ•°ã€‚</p><p>è¿™äº›å‚æ•°å¯ä»¥ä½¿ç”¨å¯é€‰æä¾›çš„ <code>parameterScope</code> åœ¨ CLI ä¸Šè‡ªåŠ¨è¿›è¡Œ "å»é‡"ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>heft-plugin.json</strong> ä¸­å®šä¹‰çš„å‚æ•°å°†ä½¿ç”¨ <code>--&lt;parameterName&gt;</code> å’Œ <code>--&lt;parameterScope&gt;:&lt;parameterName&gt;</code> åœ¨ CLI ä¸Šå¯ç”¨ã€‚å½“å¤šä¸ªæ’ä»¶æä¾›ç›¸åŒçš„å‚æ•°æ—¶ï¼Œä¸ºäº† "å»é‡" å†²çªçš„å‚æ•°ï¼Œåªæœ‰åè€…å‚æ•°åœ¨ CLI ä¸Šå¯ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ PluginA å…·æœ‰å‚æ•°èŒƒå›´ "PluginA" å®šä¹‰ <code>--parameter</code>ï¼Œå¹¶ä¸” PluginB ä¹Ÿä½¿ç”¨å‚æ•°èŒƒå›´ "PluginB" å®šä¹‰ <code>--parameter</code>ï¼Œé‚£ä¹ˆå‚æ•° <em>åªèƒ½</em> ä½œä¸º <code>--PluginA:parameter</code> å’Œ <code>--PluginB:parameter</code> å¯ç”¨ã€‚</p><p>å¦‚æœæ‚¨å¯¹è¿™äº›å¯¹ Heft çš„æ›´æ”¹æœ‰ä»»ä½•é—®é¢˜æˆ–åé¦ˆï¼Œè¯·<a href="https://rushstack.zulipchat.com/#narrow/stream/262522-heft" target="_blank" rel="noopener noreferrer">åœ¨èŠå¤©å®¤ä¸­æé—®</a>æˆ–<a href="https://github.com/microsoft/rushstack/issues/new?assignees=&amp;labels=&amp;template=heft.md&amp;title=%5Bheft%2Frc%2f0%5D+" target="_blank" rel="noopener noreferrer">æäº¤ä¸€ä¸ªé—®é¢˜</a>ã€‚</p>]]></content:encoded>
            <category>heft</category>
        </item>
        <item>
            <title><![CDATA[å…³äºRush Stackåšå®¢]]></title>
            <link>https://rushstack.io/zh-cn/blog/2023/06/01/blog-launch</link>
            <guid>https://rushstack.io/zh-cn/blog/2023/06/01/blog-launch</guid>
            <pubDate>Thu, 01 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[æ¬¢è¿æ¥åˆ°Rush Stack åšå®¢ï¼æˆ‘ä»¬æ–°è®¾ç«‹äº†è¿™ä¸ªç½‘ç«™æ¿å—ï¼Œç”¨äºåˆ†äº«å…³äº Rush Stack é¡¹ç›®çš„æ–°é—»å’Œè§è§£ã€‚]]></description>
            <content:encoded><![CDATA[<p>æ¬¢è¿æ¥åˆ°<strong>Rush Stack åšå®¢</strong>ï¼æˆ‘ä»¬æ–°è®¾ç«‹äº†è¿™ä¸ªç½‘ç«™æ¿å—ï¼Œç”¨äºåˆ†äº«å…³äº Rush Stack é¡¹ç›®çš„æ–°é—»å’Œè§è§£ã€‚</p><p>æˆ‘ä»¬ä¼šåœ¨<a href="https://twitter.com/rushstack" target="_blank" rel="noopener noreferrer">Twitter</a>
å’Œ<a href="https://fosstodon.org/@rushstack" target="_blank" rel="noopener noreferrer">Mastodon</a>ä¸Šå‘å¸ƒæ–°åšå®¢æ–‡ç« çš„å…¬å‘Šã€‚æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥è®¢é˜…åšå®¢çš„
<a href="/zh-cn/blog/rss.xml/">RSS</a>æˆ–è€…<a href="/zh-cn/blog/atom.xml/">Atom</a>æºã€‚</p><p>è€Œç½‘ç«™æ–‡æ¡£ä¸»è¦æ˜¯å‚è€ƒèµ„æ–™ï¼Œåšå®¢ä¸»é¢˜å¯èƒ½åŒ…æ‹¬ï¼š</p><ul><li>å…¬å‘Šè¯¦æƒ…</li><li>ä¸»è¦æ›´æ”¹çš„è§£é‡Š</li><li>å°è¯•æŠ€æœ¯çš„æç¤º</li><li>æœ€ä½³å®è·µ</li><li>æƒ³æ³•å’Œåˆ†æ</li></ul><p>å¦‚æœæ‚¨æƒ³è´¡çŒ®ä¸€ç¯‡åšå®¢æ–‡ç« æˆ–è€…å¸®åŠ©æˆ‘ä»¬çš„ç¿»è¯‘å·¥ä½œï¼Œè¯·è”ç³»<a href="https://github.com/octogonz" target="_blank" rel="noopener noreferrer">@octogonz</a>ã€‚</p>]]></content:encoded>
        </item>
    </channel>
</rss>