<!doctype html>
<html lang="zh-cn" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Heft 0.51中的新功能 | Rush Stack</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rushstack.io/zh-cn/images/site/rushstack-ograph.jpg"><meta data-rh="true" name="twitter:image" content="https://rushstack.io/zh-cn/images/site/rushstack-ograph.jpg"><meta data-rh="true" property="og:url" content="https://rushstack.io/zh-cn/blog/2023/06/15/heft-whats-new/"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Heft 0.51中的新功能 | Rush Stack"><meta data-rh="true" name="description" content="&quot;多阶段&quot; Heft 是 @rushstack/heft 项目的一次重大更新，目标是与 Rush 分阶段构建 更紧密地集成。此外，这次更新为 Heft 带来了更大的可定制性和改进的并行处理能力。这篇文章解释了这些改进背后的动机和架构。"><meta data-rh="true" property="og:description" content="&quot;多阶段&quot; Heft 是 @rushstack/heft 项目的一次重大更新，目标是与 Rush 分阶段构建 更紧密地集成。此外，这次更新为 Heft 带来了更大的可定制性和改进的并行处理能力。这篇文章解释了这些改进背后的动机和架构。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-06-15T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/D4N14L"><meta data-rh="true" property="article:tag" content="heft"><link data-rh="true" rel="icon" href="/zh-cn/images/site/favicon.ico"><link data-rh="true" rel="canonical" href="https://rushstack.io/zh-cn/blog/2023/06/15/heft-whats-new/"><link data-rh="true" rel="alternate" href="https://rushstack.io/blog/2023/06/15/heft-whats-new/" hreflang="en"><link data-rh="true" rel="alternate" href="https://rushstack.io/zh-cn/blog/2023/06/15/heft-whats-new/" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://rushstack.io/blog/2023/06/15/heft-whats-new/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/zh-cn/blog/rss.xml" title="Rush Stack RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-cn/blog/atom.xml" title="Rush Stack Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Rush Stack" href="/zh-cn/opensearch.xml">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic"><link rel="stylesheet" href="/zh-cn/assets/css/styles.36ece2b5.css">
<link rel="preload" href="/zh-cn/assets/js/runtime~main.0214def6.js" as="script">
<link rel="preload" href="/zh-cn/assets/js/main.7ffd8b3f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="suiteNavBar_rHPh"><div role="button" class="waffle_FRnN waffleInteraction_uHqh"><img src="/images/suitenav/rs-waffle.svg"></div><div class="waffleDivider_XicE"></div><a href="https://rushstack.io/" class="suiteNavItem_tL2w">Rush Stack</a><a href="https://rushstack.io/pages/shop/" class="suiteNavItem_tL2w">Shop</a><a href="https://rushstack.io/community/events/" class="suiteNavItem_tL2w">Events</a></div><div role="region" aria-label="跳至主要内容"><a class="skipToContent_sQ89" href="#docusaurus_skipToContent_fallback">跳至主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="/zh-cn/images/rushstack.svg" alt="Rush Stack" class="themedImage_SmPy themedImage--light_jc2g"><img src="/zh-cn/images/rushstack.svg" alt="Rush Stack" class="themedImage_SmPy themedImage--dark_D6nB"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_eEuM"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文（中国）</a><ul class="dropdown__menu"><li><a href="/blog/2023/06/15/heft-whats-new/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh-cn/blog/2023/06/15/heft-whats-new/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-cn">中文（中国）</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/zh-cn/">文档</a><a href="https://api.rushstack.io/pages/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B0ko"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-cn/blog/">博客</a><a class="navbar__item navbar__link" href="/zh-cn/pages/news/">新闻</a><a class="navbar__item navbar__link" href="/zh-cn/community/events/">活动</a><a class="navbar__item navbar__link" href="/zh-cn/pages/shop/">商店</a><a class="navbar__item navbar__link" href="/zh-cn/pages/contributing/get_started/">GitHub</a><a class="navbar__item navbar__link" href="/zh-cn/pages/help/support/">帮助</a><div class="toggle_YEEi colorModeToggle_Qcvc"><button class="clean-btn toggleButton_uXQK toggleButtonDisabled_SXkB" type="button" disabled="" title="在暗模式和亮模式之间切换（当前为 亮模式）" aria-label="在暗模式和亮模式之间切换（当前为 亮模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_MSFV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Y1Uk"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_wgNs"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_A0IM"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_BfJV thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_aNUb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_W6Ff clean-list"><li class="sidebarItem_PIco"><a class="sidebarItemLink_XFlt" href="/zh-cn/blog/2023/06/16/heft-migration-guide/">Heft 0.51迁移指南</a></li><li class="sidebarItem_PIco"><a aria-current="page" class="sidebarItemLink_XFlt sidebarItemLinkActive_wYWS" href="/zh-cn/blog/2023/06/15/heft-whats-new/">Heft 0.51中的新功能</a></li><li class="sidebarItem_PIco"><a class="sidebarItemLink_XFlt" href="/zh-cn/blog/2023/06/01/blog-launch/">关于Rush Stack博客</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_qdgl" itemprop="headline">Heft 0.51中的新功能</h1><div class="container_UtPh margin-vert--md"><time datetime="2023-06-15T00:00:00.000Z" itemprop="datePublished">2023年6月15日</time> · <!-- -->预计阅读时间 17 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_ol8W"><div class="avatar margin-bottom--sm"><a href="https://github.com/D4N14L" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/D4N14L.png" alt="Daniel Nadeau"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/D4N14L" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Daniel Nadeau</span></a></div><small class="avatar__subtitle" itemprop="description">Rush Stack maintainer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>&quot;多阶段&quot; Heft 是 <code>@rushstack/heft</code> 项目的一次重大更新，目标是与 <a href="https://rushjs.io/pages/maintainer/phased_builds/" target="_blank" rel="noopener noreferrer">Rush 分阶段构建</a> 更紧密地集成。此外，这次更新为 Heft 带来了更大的可定制性和改进的并行处理能力。这篇文章解释了这些改进背后的动机和架构。</p><blockquote><p>对于升级指南，请参阅<a href="/zh-cn/blog/2023/06/16/heft-migration-guide/">Heft 0.51 迁移指南</a>文章。</p></blockquote><p>更新版本的 Heft 改进了一些关键领域，包括：</p><ul><li>开发者定义的 Heft 插件和 Heft 事件的执行顺序</li><li>通过<code>--to</code>或<code>--only</code>等范围参数对 Heft 操作的部分执行</li><li>简化的插件 API，方便开发者制作 Heft 插件</li><li>通过<strong>heft-plugin.json</strong>明确定义所有 Heft 插件</li><li>为在一个插件包内定义多个插件提供了原生支持</li><li>改进了插件参数的处理</li><li>在 Heft 操作中提供了对增量观察模式的原生支持</li><li>降低了开销并改进了性能</li><li>还有更多！</li></ul><h2 class="anchor anchorWithStickyNavbar_abXo" id="heft-任务">Heft 任务<a href="#heft-任务" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h2><p>Heft 任务是在<strong>heft.json</strong>中指定的最小工作单元。Heft 任务可能依赖于同一阶段内的其他任务，所有任务依赖必须在依赖任务才能执行之前完成执行。</p><p>在过去的版本中，我们区分了内置任务（<code>copy-files-plugin</code>，<code>node-service-plugin</code>等）与从插件包中加载的第三方任务。从 Heft 0.53.0 开始，两种任务现在都以相同的方式声明。内置插件只需为他们的插件<code>packageName</code>指定<code>@rushstack/heft</code>即可。</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="heft-阶段">Heft 阶段<a href="#heft-阶段" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h2><p>Heft 阶段定义了在执行该阶段时将运行的一组任务。阶段充当一组逻辑任务的集合，这些任务在合理的情况下（但不一定）映射到<a href="https://rushjs.io/pages/maintainer/phased_builds/" target="_blank" rel="noopener noreferrer">Rush 阶段</a>。Heft 阶段可能依赖于其他阶段，当执行多个阶段时，所有选定的阶段必须完成执行，才能执行依赖的阶段。</p><p><strong>heft.json</strong>文件是定义给定项目或装备的阶段和任务的地方。由于此文件包含阶段和任务之间的关系，因此它定义了执行 Heft 操作的操作顺序。</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="heft-操作">Heft 操作<a href="#heft-操作" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h2><p>使用与 Rush 类似的扩展逻辑，可以通过使用<code>heft run</code>操作来执行一组 Heft 阶段。此操作按阶段依赖关系的顺序执行一组选定的阶段。如果选定的阶段互不依赖，那么将并行执行它们。选择参数包括：</p><ul><li><code>--only</code> - 执行指定的阶段</li><li><code>--to</code> - 执行指定的阶段及其所有依赖项</li></ul><p>此外，还可以通过在命令后附加<code>-- &lt;参数&gt;</code>来为<code>heft run</code>操作提供任务和阶段特定的参数。例如，<code>heft run --only build -- --clean</code>将仅运行<code>build</code>阶段，并在执行阶段之前进行清理。</p><p>此外，Heft 将为在<strong>heft.json</strong>配置中指定的每个阶段生成操作。通过运行<code>heft &lt;阶段名称&gt;</code>执行这些操作，并运行 Heft 至指定的阶段，包括所有阶段依赖项。因此，这些推断的 Heft 操作相当于运行<code>heft run --to &lt;阶段名称&gt;</code>，并且旨在作为 CLI 的简写。</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="观察模式">观察模式<a href="#观察模式" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h2><p>现在，观察模式已成为 Heft 中的一项一等公民特性。所有的 Heft 操作都创建了观察模式操作。例如，要在观察模式下运行<code>build</code>和<code>test</code>阶段，可以使用<code>heft test-watch</code>或<code>heft run-watch --to test</code>中的任一命令。在观察模式下运行时，Heft 更喜欢<code>runIncremental</code>钩子而非<code>run</code>钩子（参见<a href="#heft%E4%BB%BB%E5%8A%A1%E6%8F%92%E4%BB%B6">Heft 任务插件</a>）。</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="heftjson-结构">heft.json 结构<a href="#heftjson-结构" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h2><p>所有阶段都在顶级<code>phasesByName</code>属性内定义。每个阶段可能会指定<code>phaseDependencies</code>，以定义在运行一组 Heft 阶段时的阶段执行顺序。阶段也可以提供<code>cleanFiles</code>选项，该选项接受一个删除操作数组，在使用<code>--clean</code>标志运行时执行。</p><p>在阶段规格中，<code>tasksByName</code> 定义了执行阶段时运行的所有任务。每个任务可能会指定 <code>taskDependencies</code> 来定义任务执行的顺序。（如果省略了 <code>taskDependencies</code>，则默认为 []，并且任务只等待包含阶段的任何 <code>phaseDependencies</code>。）<code>taskDependencies</code> 中定义的所有任务必须存在于同一阶段。由于 CLI 可用性的原因，阶段名、任务名、插件名和参数范围，必须是 <code>kebab-cased</code>。</p><p>以下是一个定义了<code>build</code>和<code>test</code>阶段的&quot;heft.json&quot;文件示例：</p><p><strong>heft.json</strong>定义阶段和任务的示例</p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;$schema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;extends&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;base-project/config/heft.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;phasesByName&quot;定义了所有阶段，每个阶段定义了要运行的任务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;phasesByName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// (&quot;build&quot;是用户定义的名称，不是模式字段)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;build&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;phaseDescription&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;对构建输出进行转译并运行一个语法检查器&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;cleanFiles&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;sourcePath&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;temp-build-output&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;tasksByName&quot;定义了阶段内的所有任务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;tasksByName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// (&quot;typescript&quot;是用户定义的名称，不是模式字段)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;typescript&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;taskPlugin&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">&quot;pluginPackage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@rushstack/heft-typescript-plugin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;lint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;taskDependencies&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;typescript&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;taskPlugin&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">&quot;pluginPackage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@rushstack/heft-lint-plugin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">&quot;pluginName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eslint&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;copy-assets&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;taskPlugin&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">&quot;pluginPackage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@rushstack/heft&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">&quot;pluginName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;copy-files-plugin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">&quot;options&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string-property property" style="color:#36acaa">&quot;copyOperations&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// 注意：在之前的HEFT版本中，这被称为&quot;sourceFolder&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">&quot;sourcePath&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;src/assets&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string-property property" style="color:#36acaa">&quot;destinationFolders&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dist/assets&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// (&quot;test&quot;是用户定义的名称，不是模式字段)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;test&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;phaseDependencies&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;build&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;phaseDescription&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;运行Jest测试，如果提供的话。&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;tasksByName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// (&quot;jest&quot;是用户定义的名称，不是模式字段)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;jest&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;taskPlugin&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string-property property" style="color:#36acaa">&quot;pluginPackage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@rushstack/heft-jest-plugin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>生命周期插件在顶层的<code>heftPlugins</code>数组中指定。插件可以通过提供包名和插件名来引用。另外，如果一个包只包含一个插件，插件可以通过仅提供包名来引用，Heft 将解析为唯一导出的插件。生命周期插件也可以提供选项来修改默认行为。</p><p><strong>heft.json</strong>加载生命周期插件的示例</p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;$schema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;extends&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;base-project/config/heft.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;heftPlugins&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;pluginPackage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@rushstack/heft-metrics-reporter&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;options&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;disableMetrics&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;pluginPackage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@rushstack/heft-initialization-plugin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;pluginName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-lifecycle-plugin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// (此处也可以出现&quot;phasesByName&quot;部分)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_abXo" id="heftjson-属性继承指令">heft.json 属性继承指令<a href="#heftjson-属性继承指令" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h2><p>以前，<strong>heft.json</strong> 文件与其扩展的基本文件之间的共享属性将合并数组和覆盖对象。现在，数组和对象都将合并，当自定义扩展基本配置时，简化了<strong>heft.json</strong>文件的使用。</p><p>另外，配置文件解析器现在支持<strong>属性继承指令</strong>，用于自定义在使用<code>&quot;extends&quot;</code>继承时 JSON 属性如何合并。这个系统由 <a href="https://www.npmjs.com/package/@rushstack/heft-config-file" target="_blank" rel="noopener noreferrer">@rushstack/heft-config-file</a> 库实现，并适用于所有使用该解析器加载的配置文件。覆盖是通过使用定义继承行为的指令来指定的。</p><p>例如，假设我们正在扩展一个文件，该文件具有预先定义的<code>exampleObject</code>值（一个键对象）和<code>exampleArray</code>值（一个数组对象）：</p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;$schema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://developer.microsoft.com/json-schemas/heft/v0/example-config-file.schema.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;extends&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;base-project/config/example-config-file.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;$exampleObject.inheritanceType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;merge&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 有效选择为：&quot;merge&quot;, &quot;replace&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;exampleObject&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;$exampleObjectMember.inheritanceType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;merge&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 有效选择为：&quot;merge&quot;, &quot;replace&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;exampleObjectMember&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;$exampleArrayMember.inheritanceType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;append&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 有效选择为：&quot;append&quot;, &quot;replace&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;exampleArrayMember&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;$exampleArray.inheritanceType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;replace&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 有效选择为：&quot;append&quot;, &quot;replace&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;exampleArray&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>一旦对象被设置为覆盖的<code>inheritanceType</code>，所有子属性的<code>inheritanceType</code>值将被忽略，因为最顶层的对象已经覆盖了所有子属性。</p><p>需要注意的一点是，合并键对象和数组时使用了不同的<code>mergeBehavior</code>动词。这是为了明确表示数组将按原样追加，合并过程中不进行任何额外处理（例如，如果数组应该是一组，那么不进行重复）。如果需要这样的行为，可以在实现端完成。在<code>@rushstack/heft-config-file</code>包中对数组进行重复处理没有什么意义，因为对非基元对象的数组进行重复处理并不容易定义。</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="关联的-npm-包">关联的 NPM 包<a href="#关联的-npm-包" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h2><p>许多以前内置于 Heft 的任务现已被拆分到单独的 NPM 包中。完整列表如下：</p><ul><li><code>@rushstack/heft</code></li><li><code>@rushstack/heft-typescript-plugin</code></li><li><code>@rushstack/heft-lint-plugin</code></li><li><code>@rushstack/heft-api-extractor-plugin</code></li><li><code>@rushstack/heft-jest-plugin</code></li><li><code>@rushstack/heft-sass-plugin</code></li><li><code>@rushstack/heft-storybook-plugin</code></li><li><code>@rushstack/heft-webpack4-plugin</code></li><li><code>@rushstack/heft-webpack5-plugin</code></li><li><code>@rushstack/heft-dev-cert-plugin</code></li></ul><p>此外，Rushstack 提供的 rigs 已更新以与新版本的 Heft 兼容：</p><ul><li><code>@rushstack/heft-node-rig</code></li><li><code>@rushstack/heft-web-rig</code></li></ul><h2 class="anchor anchorWithStickyNavbar_abXo" id="编写-heft-插件">编写 Heft 插件<a href="#编写-heft-插件" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h2><h3 class="anchor anchorWithStickyNavbar_abXo" id="生命周期插件">生命周期插件<a href="#生命周期插件" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h3><p>Heft 生命周期插件为某些与生命周期相关的钩子提供实现。这些插件将在所有 Heft 阶段中使用，因此除了少数特定情况（如用于指标报告）之外，应很少在外部使用。Heft 生命周期插件提供一个 <code>apply()</code> 方法，插件可以在此处挂载以下 Tapable 钩子：</p><ul><li><code>toolStart</code> - 在 Heft 执行开始时提供与插件相关的功能</li><li><code>toolFinish</code> - 在所有任务完成后，在 Heft 执行结束时提供与插件相关的功能</li><li><code>recordMetrics</code> - 在所有任务完成后，向插件提供有关 Heft 运行的指标信息</li></ul><h3 class="anchor anchorWithStickyNavbar_abXo" id="任务插件">任务插件<a href="#任务插件" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h3><p>Heft 任务插件为 Heft 任务提供实现。Heft 插件提供一个 <code>apply()</code> 方法，插件可以在此处挂载以下 Tapable 钩子：</p><ul><li><code>registerFileOperations</code> - 在插件首次运行前确切地调用一次。允许插件使用与 <code>copyFiles</code> 和 <code>deleteFiles</code> Heft 事件相同的选项注册复制或删除操作（这个钩子就是实现这些事件的方式）。</li><li><code>run</code> - 提供与插件相关的任务功能</li><li><code>runIncremental</code> - 在观察模式下提供与插件相关的任务功能。如果没有为任务提供 <code>runIncremental</code> 实现，Heft 将像往常一样回退到使用 <code>run</code> 钩子。选项结构包括两个用于支持观察操作的函数：<ul><li><code>requestRun()</code> - 这个函数请求 Heft 运行时安排插件所属任务的新运行，可能会取消当前的构建。</li><li><code>watchGlobAsync(patterns, options)</code> - 这个函数是为了方便常见的监视 glob 变化的情况而提供的。它返回一个 <code>Map&lt;string, IWatchedFileState&gt;</code>，该映射枚举了 glob 选定的文件（或文件夹）列表，以及它们自</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_abXo" id="heft-pluginjson">heft-plugin.json<a href="#heft-pluginjson" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h3><p><strong>heft-plugin.json</strong> 配置文件是一个新的，必需的清单文件，所有 Heft 插件包的包文件夹中都必须存在。此文件用于多种用途，包括定义所有包含的生命周期或任务插件，定义所有插件特定的 CLI 参数，并提供一个可选的模式文件，以验证可以通过 <strong>heft.json</strong> 传递的插件选项。</p><p>以下是定义生命周期插件和任务插件的示例 <strong>heft-plugin.json</strong> 文件：</p><div class="language-json codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-json codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;$schema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://developer.microsoft.com/json-schemas/heft/v0/heft-plugin.schema.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;lifecyclePlugins&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;pluginName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-lifecycle-plugin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;entryPoint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./lib/MyLifecyclePlugin.js&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;optionsSchema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./lib/schemas/mylifecycleplugin.schema.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;parameterScope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-lifecycle&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;parameters&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;parameterKind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;longName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;--my-string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;…&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;argumentName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ARG_NAME&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;required&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;taskPlugins&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;pluginName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-task-plugin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;entryPoint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./lib/MyTaskPlugin.js&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;optionsSchema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./lib/schemas/mytaskplugin.schema.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;parameterScope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-task&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;parameters&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;parameterKind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;longName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;--my-other-string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;…&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;argumentName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ARG_NAME&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;required&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_abXo" id="跨插件交互">跨插件交互<a href="#跨插件交互" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h3><p>有时插件之间的交流会很有帮助。例如，<code>@rushstack/heft-lint-plugin</code> 和 <code>@rushstack/heft-typescript-plugin</code> 共享一个 TypeScript 的 <code>ts.Program</code> 对象，这极大地提高了构建时间，因为避免了两次计算编译器的语义分析。这种优化带来了一个约束，那就是任务必须在您的 <strong>heft.json</strong> 配置中共享同一个 Heft 阶段。</p><p>这是如何工作的？Heft 插件可以使用 <code>requestAccessToPluginByName()</code> API 来访问请求的 <strong>插件访问器</strong>。访问器是插件提供给外部使用的对象，是分享插件特定信息或提供额外插件功能的钩子的理想位置。</p><p>在阶段执行开始时，清理钩子执行之前，满足访问请求。如果请求的插件没有提供访问器，将抛出一个错误，指出缺少访问器的插件。然而，如果完全没有请求的插件，访问请求将默默地失败。这样做是为了允许对外部插件进行非必需的集成。因此，实现跨插件交互的方式很重要，以期望这种情况，并优雅地处理，或者抛出一个有帮助的错误。</p><p>可访问的插件基于范围进行限制。对于生命周期插件，您可以请求访问添加到 Heft 配置中的任何其他生命周期插件。对于任务插件，您可以请求访问 Heft 配置中相同阶段内的任何其他任务插件。</p><h3 class="anchor anchorWithStickyNavbar_abXo" id="自定义-cli-参数">自定义 CLI 参数<a href="#自定义-cli-参数" class="hash-link" aria-label="直接链接到标题" title="直接链接到标题">​</a></h3><p>现在，只能通过 <strong>heft-plugin.json</strong> 定义 CLI 参数，而定义的参数可以通过 <code>HeftTaskSession.parameters</code> API 在插件中使用。此外，当使用 <code>--help</code> 参数（例如 <code>heft test --help</code> 或 <code>heft run --to test -- --help</code>）时，现在可以在 CLI 中发现选定的 Heft 阶段的所有插件参数。</p><p>这些参数可以使用可选提供的 <code>parameterScope</code> 在 CLI 上自动进行 &quot;去重&quot;。默认情况下，<strong>heft-plugin.json</strong> 中定义的参数将使用 <code>--&lt;parameterName&gt;</code> 和 <code>--&lt;parameterScope&gt;:&lt;parameterName&gt;</code> 在 CLI 上可用。当多个插件提供相同的参数时，为了 &quot;去重&quot; 冲突的参数，只有后者参数在 CLI 上可用。例如，如果 PluginA 具有参数范围 &quot;PluginA&quot; 定义 <code>--parameter</code>，并且 PluginB 也使用参数范围 &quot;PluginB&quot; 定义 <code>--parameter</code>，那么参数 <em>只能</em> 作为 <code>--PluginA:parameter</code> 和 <code>--PluginB:parameter</code> 可用。</p><p>如果您对这些对 Heft 的更改有任何问题或反馈，请<a href="https://rushstack.zulipchat.com/#narrow/stream/262522-heft" target="_blank" rel="noopener noreferrer">在聊天室中提问</a>或<a href="https://github.com/microsoft/rushstack/issues/new?assignees=&amp;labels=&amp;template=heft.md&amp;title=%5Bheft%2Frc%2f0%5D+" target="_blank" rel="noopener noreferrer">提交一个问题</a>。</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_WMaT"><div class="col"><b>标签:</b><ul class="tags_WsL4 padding--none margin-left--sm"><li class="tag__oxt"><a class="tag_mVZf tagRegular_kpnf" href="/zh-cn/blog/tags/heft/">heft</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/microsoft/rushstack-websites/tree/main/websites/rushstack.io/blog/2023-06-15-heft-whats-new.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_DX5v" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页面</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博客导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-cn/blog/2023/06/16/heft-migration-guide/"><div class="pagination-nav__sublabel">前一篇</div><div class="pagination-nav__label">Heft 0.51迁移指南</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-cn/blog/2023/06/01/blog-launch/"><div class="pagination-nav__sublabel">后一篇</div><div class="pagination-nav__label">关于Rush Stack博客</div></a></nav></main><div class="col col--2"><div class="tableOfContents_JkeW thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#heft-任务" class="table-of-contents__link toc-highlight">Heft 任务</a></li><li><a href="#heft-阶段" class="table-of-contents__link toc-highlight">Heft 阶段</a></li><li><a href="#heft-操作" class="table-of-contents__link toc-highlight">Heft 操作</a></li><li><a href="#观察模式" class="table-of-contents__link toc-highlight">观察模式</a></li><li><a href="#heftjson-结构" class="table-of-contents__link toc-highlight">heft.json 结构</a></li><li><a href="#heftjson-属性继承指令" class="table-of-contents__link toc-highlight">heft.json 属性继承指令</a></li><li><a href="#关联的-npm-包" class="table-of-contents__link toc-highlight">关联的 NPM 包</a></li><li><a href="#编写-heft-插件" class="table-of-contents__link toc-highlight">编写 Heft 插件</a><ul><li><a href="#生命周期插件" class="table-of-contents__link toc-highlight">生命周期插件</a></li><li><a href="#任务插件" class="table-of-contents__link toc-highlight">任务插件</a></li><li><a href="#heft-pluginjson" class="table-of-contents__link toc-highlight">heft-plugin.json</a></li><li><a href="#跨插件交互" class="table-of-contents__link toc-highlight">跨插件交互</a></li><li><a href="#自定义-cli-参数" class="table-of-contents__link toc-highlight">自定义 CLI 参数</a></li></ul></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2022 Microsoft</div></div></div></footer></div>
<script src="/zh-cn/assets/js/runtime~main.0214def6.js"></script>
<script src="/zh-cn/assets/js/main.7ffd8b3f.js"></script>
</body>
</html>